<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c14{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:10pt;font-family:"Arial";font-style:normal}.c145{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:16.6pt;font-family:"Arial";font-style:normal}.c1{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Times New Roman";font-style:normal}.c86{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:9.4pt;font-family:"Arial";font-style:normal}.c123{margin-left:-9.2pt;padding-top:1.2pt;text-indent:27pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-15.8pt}.c148{color:#231f20;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:7pt;font-family:"Arial";font-style:normal}.c205{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:9.5pt;font-family:"Arial";font-style:normal}.c12{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Arial";font-style:italic}.c41{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:16.8pt;font-family:"Times New Roman";font-style:italic}.c54{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:5.5pt;font-family:"Times New Roman";font-style:italic}.c32{color:#231f20;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:6.5pt;font-family:"Arial";font-style:normal}.c105{color:#221e1f;font-weight:400;text-decoration:none;vertical-align:super;font-size:9.2pt;font-family:"Arial";font-style:normal}.c80{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.1pt;font-family:"Times New Roman";font-style:italic}.c42{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6.1pt;font-family:"Arial";font-style:normal}.c25{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:5.5pt;font-family:"Arial";font-style:normal}.c103{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:9pt;font-family:"Arial";font-style:normal}.c116{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8.2pt;font-family:"Arial";font-style:italic}.c7{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Times New Roman";font-style:normal}.c59{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:5.6pt;font-family:"Arial";font-style:normal}.c31{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Arial";font-style:normal}.c81{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:6.4pt;font-family:"Arial";font-style:normal}.c172{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:19.9pt;font-family:"Arial";font-style:normal}.c27{margin-left:-9.2pt;padding-top:1pt;text-indent:27pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-5.5pt}.c72{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:6.3pt;font-family:"Arial";font-style:normal}.c90{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6.2pt;font-family:"Times New Roman";font-style:italic}.c102{margin-left:-9.2pt;padding-top:1.2pt;text-indent:27pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-2.6pt}.c63{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:9.9pt;font-family:"Arial";font-style:normal}.c64{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:5.4pt;font-family:"Arial";font-style:normal}.c186{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:12.5pt;font-family:"Times New Roman";font-style:italic}.c56{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:10.6pt;font-family:"Times New Roman";font-style:normal}.c94{color:#231f20;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:7pt;font-family:"Courier New";font-style:normal}.c138{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6.4pt;font-family:"Arial";font-style:italic}.c133{color:#231f20;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:17.9pt;font-family:"Arial";font-style:normal}.c0{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:14.9pt;font-family:"Times New Roman";font-style:normal}.c91{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:8.5pt;font-family:"Times New Roman";font-style:italic}.c26{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Times New Roman";font-style:italic}.c18{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:8.3pt;font-family:"Arial";font-style:italic}.c8{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:13.3pt;font-family:"Arial";font-style:italic}.c166{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:12.4pt;font-family:"Times New Roman";font-style:italic}.c39{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6pt;font-family:"Courier New";font-style:normal}.c98{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:7.9pt;font-family:"Times New Roman";font-style:italic}.c207{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:8.8pt;font-family:"Arial";font-style:normal}.c78{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:6pt;font-family:"Arial";font-style:normal}.c185{margin-left:118.5pt;padding-top:2.9pt;text-indent:-93.3pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:67.4pt}.c57{margin-left:-9.2pt;padding-top:1pt;text-indent:27pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-13.7pt}.c44{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6pt;font-family:"Times New Roman";font-style:normal}.c48{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:14.9pt;font-family:"Arial";font-style:italic}.c127{margin-left:-9.2pt;padding-top:1.2pt;text-indent:27pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-0.5pt}.c65{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:6.8pt;font-family:"Arial";font-style:normal}.c37{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:3.8pt;font-family:"Arial";font-style:normal}.c73{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:14.7pt;font-family:"Times New Roman";font-style:italic}.c16{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Times New Roman";font-style:italic}.c19{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:14.9pt;font-family:"Times New Roman";font-style:normal}.c60{margin-left:-18.2pt;padding-top:10.8pt;text-indent:27.4pt;padding-bottom:0pt;line-height:1.15;text-align:justify;margin-right:-7pt}.c196{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:5.2pt;font-family:"Arial";font-style:normal}.c181{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:11.4pt;font-family:"Arial";font-style:normal}.c47{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:10.1pt;font-family:"Arial";font-style:normal}.c142{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:5.8pt;font-family:"Times New Roman";font-style:italic}.c97{margin-left:-9.2pt;padding-top:1pt;text-indent:27pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:16.3pt}.c96{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:11.1pt;font-family:"Arial";font-style:normal}.c192{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6.6pt;font-family:"Arial";font-style:italic}.c149{margin-left:-9.2pt;padding-top:1.2pt;text-indent:27pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-5pt}.c58{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:9.7pt;font-family:"Times New Roman";font-style:italic}.c165{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8.3pt;font-family:"Arial";font-style:italic}.c193{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:5.8pt;font-family:"Times New Roman";font-style:normal}.c11{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:14.9pt;font-family:"Arial";font-style:normal}.c92{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:10.9pt;font-family:"Times New Roman";font-style:italic}.c69{color:#231f20;font-weight:700;text-decoration:none;vertical-align:sub;font-size:8.5pt;font-family:"Arial";font-style:normal}.c206{margin-left:-9.2pt;padding-top:1pt;text-indent:27pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:15.1pt}.c93{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:10pt;font-family:"Times New Roman";font-style:italic}.c182{margin-left:-9.2pt;padding-top:1.2pt;text-indent:27pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:1.9pt}.c79{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:9.1pt;font-family:"Arial";font-style:normal}.c85{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:6.5pt;font-family:"Arial";font-style:normal}.c3{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6pt;font-family:"Arial";font-style:italic}.c74{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:7pt;font-family:"Times New Roman";font-style:normal}.c147{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:3.1pt;font-family:"Arial";font-style:normal}.c131{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:9.8pt;font-family:"Arial";font-style:normal}.c159{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:4.6pt;font-family:"Arial";font-style:normal}.c29{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:5.7pt;font-family:"Arial";font-style:normal}.c89{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:7.5pt;font-family:"Times New Roman";font-style:italic}.c200{color:#231f20;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:7.5pt;font-family:"Arial";font-style:normal}.c106{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:7pt;font-family:"Arial";font-style:normal}.c22{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:13.3pt;font-family:"Times New Roman";font-style:normal}.c6{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:10pt;font-family:"Arial";font-style:italic}.c176{margin-left:-9.2pt;padding-top:1pt;text-indent:27pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-15.1pt}.c30{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:14.9pt;font-family:"Arial";font-style:normal}.c38{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6.6pt;font-family:"Arial";font-style:normal}.c17{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:10pt;font-family:"Times New Roman";font-style:normal}.c68{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:14.9pt;font-family:"Times New Roman";font-style:italic}.c21{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:13.3pt;font-family:"Arial";font-style:normal}.c87{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Times New Roman";font-style:italic}.c126{margin-left:-9.2pt;padding-top:1.2pt;text-indent:27pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-7.2pt}.c20{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:10.5pt;font-family:"Arial";font-style:normal}.c119{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:4.7pt;font-family:"Arial";font-style:normal}.c108{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:6.1pt;font-family:"Arial";font-style:normal}.c150{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:7pt;font-family:"Times New Roman";font-style:italic}.c66{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:6.7pt;font-family:"Arial";font-style:normal}.c5{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:3.9pt;font-family:"Arial";font-style:normal}.c40{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:13.3pt;font-family:"Times New Roman";font-style:italic}.c120{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6.4pt;font-family:"Times New Roman";font-style:normal}.c2{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Arial";font-style:normal}.c15{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6pt;font-family:"Arial";font-style:normal}.c62{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:5.9pt;font-family:"Times New Roman";font-style:italic}.c9{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Arial";font-style:italic}.c43{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6.8pt;font-family:"Times New Roman";font-style:italic}.c46{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Times New Roman";font-style:normal}.c55{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6.3pt;font-family:"Arial";font-style:normal}.c24{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:7.4pt;font-family:"Times New Roman";font-style:italic}.c141{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:11.4pt;font-family:"Times New Roman";font-style:italic}.c28{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6.9pt;font-family:"Arial";font-style:normal}.c99{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6pt;font-family:"Times New Roman";font-style:italic}.c36{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8.8pt;font-family:"Times New Roman";font-style:italic}.c154{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:5.6pt;font-family:"Times New Roman";font-style:italic}.c121{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:5pt;font-family:"Arial";font-style:italic}.c95{color:#231f20;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:7.5pt;font-family:"Courier New";font-style:normal}.c45{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:10pt;font-family:"Arial";font-style:normal}.c51{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:7.2pt;font-family:"Times New Roman";font-style:normal}.c132{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6.2pt;font-family:"Arial";font-style:italic}.c175{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:8.6pt;font-family:"Times New Roman";font-style:italic}.c33{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:10pt;font-family:"Arial";font-style:italic}.c23{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:14.9pt;font-family:"Arial";font-style:italic}.c61{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:5.9pt;font-family:"Arial";font-style:normal}.c35{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c4{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:10pt;font-family:"Courier New";font-style:normal}.c112{color:#221e1f;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:7pt;font-family:"Arial";font-style:normal}.c129{margin-left:-9.2pt;padding-top:1.2pt;text-indent:27pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-13.4pt}.c144{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:10.3pt;font-family:"Times New Roman";font-style:italic}.c71{color:#231f20;font-weight:400;text-decoration:none;vertical-align:super;font-size:9.2pt;font-family:"Arial";font-style:normal}.c67{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:10.5pt;font-family:"Times New Roman";font-style:italic}.c104{color:#231f20;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:6.7pt;font-family:"Times New Roman";font-style:normal}.c107{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:15pt;font-family:"Times New Roman";font-style:italic}.c34{color:#231f20;font-weight:400;text-decoration:none;vertical-align:sub;font-size:6.1pt;font-family:"Times New Roman";font-style:italic}.c199{margin-left:-9.2pt;padding-top:1pt;text-indent:27pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:23.8pt}.c135{margin-left:-14.2pt;padding-top:1pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:3pt}.c49{margin-left:-8.2pt;padding-top:9.6pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:68.4pt}.c83{margin-left:191.7pt;padding-top:11pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:9.1pt}.c171{margin-left:-8.2pt;padding-top:9.4pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:31.7pt}.c100{margin-left:-18.2pt;padding-top:12.7pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-7pt}.c161{margin-left:-9.2pt;padding-top:1.2pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-12.7pt}.c76{margin-left:-9.2pt;padding-top:1.7pt;padding-bottom:0pt;line-height:1.15;text-align:right;margin-right:-16.1pt}.c111{margin-left:38.3pt;padding-top:6.2pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:133.4pt}.c122{margin-left:-14.2pt;padding-top:1pt;padding-bottom:0pt;line-height:1.15;text-align:center;margin-right:13.1pt}.c137{margin-left:-18.2pt;padding-top:11.3pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:130.7pt}.c191{margin-left:-14.2pt;padding-top:1pt;padding-bottom:0pt;line-height:1.15;text-align:right;margin-right:2.1pt}.c188{margin-left:8.6pt;padding-top:1.2pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:5.5pt}.c183{margin-left:-9.2pt;padding-top:1pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-10.8pt}.c164{margin-left:-18.2pt;padding-top:12.7pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-6.8pt}.c180{margin-left:-14.2pt;padding-top:1.2pt;padding-bottom:0pt;line-height:1.15;text-align:center;margin-right:0.2pt}.c163{margin-left:-14.2pt;padding-top:1pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-4.6pt}.c124{margin-left:-9.2pt;padding-top:1pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-12.2pt}.c170{margin-left:-4.4pt;padding-top:28.1pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:103pt}.c125{margin-left:-9.2pt;padding-top:1.2pt;padding-bottom:0pt;line-height:1.15;text-align:center;margin-right:-10.8pt}.c189{margin-left:-18.2pt;padding-top:12.7pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:10.5pt}.c155{margin-left:-14.2pt;padding-top:1.2pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-4.4pt}.c162{margin-left:-9.2pt;padding-top:1.2pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-7.9pt}.c130{margin-left:-9.2pt;padding-top:1.2pt;padding-bottom:0pt;line-height:1.15;text-align:center;margin-right:2.2pt}.c143{margin-left:-14.2pt;padding-top:1pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:7.6pt}.c114{margin-left:227.3pt;padding-top:40.1pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-26.7pt}.c198{margin-left:68.2pt;padding-top:28.6pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:70.3pt}.c134{margin-left:-18.2pt;padding-top:13.7pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:14.1pt}.c101{margin-left:-18.2pt;padding-top:45.8pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-7pt}.c110{margin-left:-18.2pt;padding-top:30.7pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-7pt}.c203{margin-left:-18pt;padding-top:8.2pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-4.2pt}.c187{margin-left:42.2pt;padding-top:66.2pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:151.7pt}.c82{margin-left:-18.2pt;padding-top:1pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-4.2pt}.c77{margin-left:-18.2pt;padding-top:11.3pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-1.8pt}.c202{margin-left:-14.2pt;padding-top:1.2pt;padding-bottom:0pt;line-height:1.15;text-align:center;margin-right:-3.7pt}.c13{margin-left:-9.2pt;padding-top:13.7pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:13.9pt}.c190{margin-left:229.4pt;padding-top:34.3pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-24.6pt}.c173{margin-left:-5.1pt;padding-top:7.2pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-12pt}.c88{margin-left:227.3pt;padding-top:34.3pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-26.7pt}.c84{margin-left:227.3pt;padding-top:46.3pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-26.7pt}.c157{margin-left:-18.2pt;padding-top:14.6pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:17.9pt}.c136{margin-left:-9.2pt;padding-top:1pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-14.2pt}.c158{margin-left:125.9pt;padding-top:2.9pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:85.2pt}.c52{margin-left:-9.2pt;padding-top:1.2pt;padding-bottom:0pt;line-height:1.15;text-align:center;margin-right:-7pt}.c177{margin-left:171.8pt;padding-top:12.2pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:29pt}.c109{margin-left:-18.2pt;padding-top:11.5pt;padding-bottom:0pt;line-height:1.15;text-align:left;margin-right:-7pt}.c160{padding-top:7.7pt;text-indent:27.4pt;padding-bottom:0pt;line-height:1.15;text-align:justify}.c169{padding-top:6.2pt;text-indent:28.6pt;padding-bottom:0pt;line-height:1.15;text-align:justify}.c151{padding-top:8.9pt;text-indent:28.6pt;padding-bottom:0pt;line-height:1.15;text-align:justify}.c184{padding-top:24.7pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c197{padding-top:30.5pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c140{padding-top:17.3pt;padding-bottom:0pt;line-height:1.15;text-align:justify}.c167{padding-top:1pt;padding-bottom:0pt;line-height:1.15;text-align:center}.c10{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c178{padding-top:44.4pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c146{padding-top:16.6pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c153{padding-top:21.4pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c50{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:center}.c195{padding-top:1.2pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c75{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:right}.c204{padding-top:7.9pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c53{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:justify}.c118{padding-top:13pt;padding-bottom:0pt;line-height:1.15;text-align:right}.c139{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c168{margin-left:136.5pt;margin-right:63.6pt}.c156{margin-left:154.7pt;margin-right:46.1pt}.c201{margin-left:-0.5pt;margin-right:56.8pt}.c194{margin-left:-3.6pt;margin-right:-5.3pt}.c174{margin-left:-9.2pt;margin-right:-11.5pt}.c115{margin-left:-18.2pt;margin-right:-7pt}.c152{margin-left:134.1pt;margin-right:5.8pt}.c113{margin-left:173.9pt;margin-right:26.6pt}.c128{margin-left:-9.2pt;margin-right:0.2pt}.c179{margin-left:191.7pt;margin-right:9.1pt}.c117{margin-left:-9.2pt;margin-right:-16.1pt}.c70{margin-left:-9.2pt;margin-right:55.2pt}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:36pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:24pt;color:#000000;font-weight:700;font-size:24pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-weight:700;font-size:18pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:14pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:12pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:2pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:11pt;color:#000000;font-weight:700;font-size:11pt;padding-bottom:2pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:10pt;color:#000000;font-weight:700;font-size:10pt;padding-bottom:2pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}</style></head><body class="c139"><p class="c10 c194"><span class="c133">Density-based Place Clustering in Geo-Social Networks</span><span class="c14">&lowast; </span></p><p class="c198"><span class="c35">Jieming Shi, Nikos Mamoulis, Dingming Wu, David W. Cheung </span><span class="c145">Department of Computer Science, The University of Hong Kong Pokfulam Road, Hong Kong </span><span class="c172">{jmshi,nikos,dmwu,dcheung}@cs.hku.hk </span></p><p class="c101"><span class="c35">ABSTRACT </span><span class="c1">Spatial clustering deals with the unsupervised grouping of places into clusters and finds important applications in urban planning and marketing. Current spatial clustering models disregard infor- mation about the people who are related to the clustered places. In this paper, we show how the density-based clustering paradigm can be extended to apply on places which are visited by users of a geo-social network. Our model considers both spatial information and the social relationships between users who visit the clustered places. After formally defining the model and the distance measure it relies on, we present efficient algorithms for its implementation, based on spatial indexing. We evaluate the effectiveness of our model via a case study on real data; in addition, we design two quantitative measures, called social entropy and community score to evaluate the quality of the discovered clusters. The results show that geo-social clusters have special properties and cannot be found by applying simple spatial clustering approaches. The efficiency of our index-based implementation is also evaluated experimentally. </span></p><p class="c164"><span class="c35">Categories and Subject Descriptors </span><span class="c1">H.2.8 [</span><span class="c2">DATABASE MANAGEMENT</span><span class="c1">]: Database Applications&mdash; </span><span class="c16">Data mining, Spatial databases and GIS</span><span class="c1">; H.3.3 [</span><span class="c2">INFORMATION STORAGE AND RETRIEVAL</span><span class="c1">]: Information Search and Re- trieval&mdash;</span><span class="c16">Clustering </span></p><p class="c189"><span class="c35">Keywords </span><span class="c1">geo-social network; density-based clustering; spatial indexing </span></p><p class="c100"><span class="c35">1. INTRODUCTION </span><span class="c1">Clustering is commonly used as a method for data exploration, characterization, and summarization. Density-based clustering [9], in particular, divides a large collection of points into densely pop- ulated regions and it is the most appropriate clustering paradigm for spatial data, which have low dimensionality [30]. Density- based clusters have arbitrary shapes and sizes and exclude objects </span></p><p class="c203"><span class="c15">&lowast;</span><span class="c0">Work supported by grant HKU 715413E from Hong Kong RGC. </span></p><p class="c115 c146"><span class="c74">Permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full cita- tion on the first page. Copyrights for components of this work owned by others than ACM must be honored. Abstracting with credit is permitted. To copy otherwise, or re- publish, to post on servers or to redistribute to lists, requires prior specific permission and/or a fee. Request permissions from permissions@acm.org. </span><span class="c150">SIGMOD&rsquo;14, </span><span class="c74">June 22&ndash;27, 2014, Snowbird, UT, USA. Copyright 2014 ACM 978-1-4503-2376-5/14/06 ...$15.00 http://dx.doi.org/10.1145/2588555.2610497. </span></p><p class="c75 c117"><span class="c1">in areas of low density (i.e., outliers). The DBSCAN model [9] finds the spatial </span><span class="c9">eps</span><span class="c1">-neighborhood of each point </span><span class="c9">p </span><span class="c1">in the dataset, which is a circular region centered at </span><span class="c9">p </span><span class="c1">with radius </span><span class="c9">eps</span><span class="c1">. If the </span><span class="c9">eps</span><span class="c1">- neighborhood of </span><span class="c9">p </span><span class="c1">is dense, meaning that it contains no less than </span><span class="c9">MinPts </span><span class="c1">places, </span><span class="c9">p </span><span class="c1">is called a </span><span class="c16">core </span><span class="c1">point. Dense </span><span class="c9">eps</span><span class="c1">-neighborhoods are put into the same cluster if they contain the cores of each other. In this paper, we investigate the extension of traditional density- based clustering for spatial locations to consider their relation- ship to a social network of people who visit them. In specific, we consider the places of a </span><span class="c16">Geo-Social Network </span><span class="c1">(GeoSN) ap- plication, which allows users to capture their geographic loca- tions and share them in the social network, by an operation called </span><span class="c16">checkin</span><span class="c1">. Online social networks with this functionality include Gowalla</span><span class="c17">1</span><span class="c1">, Foursquare</span><span class="c17">2</span><span class="c1">, and Facebook Places</span><span class="c17">3</span><span class="c1">. A checkin is a triplet </span><span class="c2">&#10216;</span><span class="c9">uid,pid,time</span><span class="c2">&#10217; </span><span class="c1">modeling the fact that user </span><span class="c9">uid </span><span class="c1">visited place </span><span class="c9">pid </span><span class="c1">at a certain </span><span class="c9">time</span><span class="c1">. </span></p><p class="c76"><span class="c1">We define the new problem of Density-based Clustering Places in Geo-Social Networks (DCPGS), to detect geo-social clusters in GeoSNs. DCPGS extends DBSCAN by replacing the Euclidean distance threshold </span><span class="c9">eps </span><span class="c1">for the extents of dense regions by a thresh- old </span><span class="c9">&epsilon;</span><span class="c1">, which considers both the </span><span class="c16">spatial </span><span class="c1">and the </span><span class="c16">social distances </span><span class="c1">be- tween places. For two places </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j</span><span class="c1">, the spatial distance is con- sidered to be the Euclidean distance between </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j</span><span class="c0">, while the </span><span class="c1">social distance should consider the social relationships between </span><span class="c16">the two </span><span class="c1">spectively. </span><span class="c16">sets of users </span><span class="c1">We define </span><span class="c9">U</span><span class="c3">p</span><span class="c18">i </span><span class="c1">and and </span><span class="c9">U</span><span class="c3">p</span><span class="c1">use </span><span class="c18">j </span><span class="c1">such which a social have checked distance in measure, </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j</span><span class="c1">, based re- </span></p><p class="c76"><span class="c1">on the intuition that two places are socially similar if they share many common users in their checkin records or the users in these records are linked by friendship edges. Figure 1(a) illustrates the data of a GeoSN that includes eight users (</span><span class="c9">u</span><span class="c39">1</span><span class="c1">&ndash;</span><span class="c9">u</span><span class="c4">8</span><span class="c0">) and two places </span><span class="c1">(</span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j</span><span class="c0">). The dashed lines represent user friendships and the </span><span class="c1">solid lines annotated with timestamps (</span><span class="c9">t</span><span class="c39">1</span><span class="c1">&ndash;</span><span class="c9">t</span><span class="c39">9</span><span class="c1">) illustrate checkins of users at places. For instance, user </span><span class="c9">u</span><span class="c4">1 </span><span class="c0">is a friend with </span><span class="c23">u</span><span class="c4">2 </span><span class="c0">and </span><span class="c23">u</span><span class="c4">3 </span><span class="c0">and </span><span class="c1">has visited place </span><span class="c9">p</span><span class="c3">i </span><span class="c1">at time </span><span class="c9">t</span><span class="c39">3 </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j </span><span class="c1">at </span><span class="c9">t</span><span class="c39">5</span><span class="c1">. As Figure 1(b) shows, each place is modeled by its spatial coordinates (e.g., </span><span class="c2">&#10216;</span><span class="c9">la</span><span class="c6">i</span><span class="c23">,lo</span><span class="c6">i</span><span class="c11">&#10217; </span><span class="c0">for </span><span class="c1">the latitude and longitude of </span><span class="c9">p</span><span class="c6">i</span><span class="c0">) and the set of users that have visited </span><span class="c1">it can (e.g., use </span><span class="c9">U</span><span class="c3">p</span><span class="c1">the </span><span class="c18">i </span><span class="c1">for </span><span class="c9">p</span><span class="c3">i</span><span class="c1">). For the spatial distance between </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j</span><span class="c1">, we Euclidean distance between </span><span class="c2">&#10216;</span><span class="c9">la</span><span class="c6">i</span><span class="c23">,lo</span><span class="c6">i</span><span class="c11">&#10217; </span><span class="c0">and </span><span class="c11">&#10216;</span><span class="c23">la</span><span class="c6">j</span><span class="c23">,lo</span><span class="c6">j</span><span class="c11">&#10217;</span><span class="c0">, </span><span class="c1">while for the social distance component we use the set of com- mon users in place&rsquo;s record </span><span class="c9">U</span><span class="c1">who </span><span class="c6">p</span><span class="c18">i </span><span class="c1">and are friends </span><span class="c9">U</span><span class="c6">p</span><span class="c18">j </span><span class="c1">(e.g., </span><span class="c2">{</span><span class="c9">u</span><span class="c4">1</span><span class="c23">,u</span><span class="c4">2</span><span class="c11">}</span><span class="c0">) and the users in one </span><span class="c1">with visitors of the other place (e.g., </span><span class="c9">u</span><span class="c39">3 </span><span class="c2">&isin; </span><span class="c1">intuition </span><span class="c9">U</span><span class="c6">p</span><span class="c18">i </span><span class="c1">is and that </span><span class="c9">u</span><span class="c1">users </span><span class="c4">6 </span><span class="c11">&isin; </span><span class="c23">U</span><span class="c1">who </span><span class="c6">p</span><span class="c18">j </span><span class="c1">who are friends with each other). The are friends can influence each other to visit the places included in their checkin history. The details of our distance measure are presented in Section 2. </span></p><p class="c49"><span class="c44">1</span><span class="c0">http://gowalla.com </span><span class="c44">2</span><span class="c0">https://foursquare.com </span><span class="c44">3</span><span class="c0">https://www.facebook.com/about/location </span></p><p class="c190"><span class="c46">99 </span></p><p class="c10"><span class="c36">u</span><span class="c24">4 </span></p><p class="c10"><span class="c80">u</span><span class="c91">8 </span></p><p class="c10"><span class="c16">U</span><span class="c154">p</span><span class="c34">i </span></p><p class="c75"><span class="c80">uu</span><span class="c41">uuu</span><span class="c91">7 6521</span><span class="c16">U</span><span class="c154">p</span><span class="c34">j </span><span class="c16">p</span><span class="c58">i </span><span class="c104">: </span><span class="c16">&lt;la</span><span class="c58">i</span><span class="c107">, lo</span><span class="c58">i</span><span class="c107">&gt; p</span><span class="c58">j </span><span class="c104">: </span><span class="c16">&lt;la</span><span class="c58">j</span><span class="c107">, lo</span><span class="c58">j</span><span class="c107">&gt; </span><span class="c1">(b) Abstraction </span></p><p class="c10"><span class="c2">Figure 1: Example and storage structure of GeoSNs </span></p><p class="c10"><span class="c1">To the best of our knowledge, there is no previous work on clus- tering GeoSN places. While there exists a significant body of re- search on analyzing and querying GeoSN data [4, 7, 27, 28, 36, 37], most of these works are centered around users; i.e., they study user behavior, user link prediction or recommendation, or the evaluation of user queries. Thus, the places and checkins are only regarded as some auxiliary information to facilitate user-centered analysis. On the other hand, GeoSNs provide a new and rich form of geograph- ical data, affiliated with the social network graph, the analysis of which can provide new and interesting insights, compared to raw spatial data. In specific, clustering of places in a GeoSN network finds a number of interesting applications: </span><span class="c2">Generalization and characterization of places. </span><span class="c1">In geographic data analysis, a common task is to define regions (especially in ur- ban areas), which include similar places with respect to the people who live in them or visit them. For example, in urban planning, land managers are interested in identifying regions which have uni- form (i.e., consistent) demographic statistics, e.g., areas where el- derly people prefer to visit, or people who belong to certain reli- gious communities and have special transportation or living needs. Our DCPGS framework is especially useful for such spatial gen- eralization and characterization tasks, because it can identify ge- ographic regions where places form dense regions and the people who visit them are also socially connected to each other. On the other hand, by simply using spatial clustering, we may not be able to separate regions that are geographically close (e.g., neighboring &ldquo;districts&rdquo;) but are visited by different social user groups. </span><span class="c2">Data cleaning. </span><span class="c1">Intuitively, places that belong in the same geo- social cluster, according to our DCPGS framework, should have similar semantics. Therefore, our clustering results can help toward the cleaning of semantics (e.g., tags), which are given to places being in the same cluster (e.g., inspect tags that are inconsistent with the ones given to the majority of places in the cluster). In addition, as already mentioned, nearby GeoSN locations collected by user checkins could belong to the same physical place (e.g., a large restaurant) and our clusters can help toward identifying such cases and integrating multiple locations to the same physical place (i.e., region), possibly with the joint help of map-matching tools. </span><span class="c2">Marketing. </span><span class="c1">GeoSN places may be commercial (e.g., restaurants). The fact that two (or more) such places belong to the same geo- social cluster indicates that there is a high likelihood that a user who likes one place would also be interested to visit the other(s). Therefore, by having knowledge of a place&rsquo;s geo-social cluster, the management of the place may initiate campaigns to users who vis- ited other places in the same cluster, or a set of places could do collaborative promotion (e.g., a discount for users who visit multi- ple places in the cluster). </span></p><p class="c53"><span class="c1">Compared to conventional density-based spatial clusters, geo- social clusters detected by DCPGS exhibit larger intra-cluster so- cial strength, as we confirm experimentally in Section 4. DCPGS </span></p><p class="c10"><span class="c43">t</span><span class="c24">1 </span><span class="c141">t</span><span class="c24">2 </span></p><p class="c10"><span class="c43">t</span><span class="c24">4 </span><span class="c43">t</span><span class="c24">5</span><span class="c43">t</span><span class="c24">6 </span><span class="c43">t</span><span class="c24">7 </span></p><p class="c10"><span class="c43">t</span><span class="c24">8 </span><span class="c43">t</span><span class="c24">9 </span></p><p class="c10"><span class="c1">(a) A toy example </span></p><p class="c10"><span class="c36">u</span><span class="c24">8 </span></p><p class="c10"><span class="c36">u</span><span class="c24">3 </span></p><p class="c10"><span class="c73">u</span><span class="c24">1 </span><span class="c73">u</span><span class="c24">6 </span><span class="c73">u</span><span class="c24">2 </span><span class="c73">u</span><span class="c24">5 </span><span class="c36">u</span><span class="c24">7 </span><span class="c43">t</span><span class="c24">3 </span></p><p class="c10"><span class="c36">p</span><span class="c24">i</span><span class="c36">p</span><span class="c24">j </span></p><p class="c10"><span class="c80">u</span><span class="c91">4</span><span class="c41">u</span><span class="c91">3</span><span class="c41">u</span><span class="c92">2</span><span class="c41">u</span><span class="c92">1 </span></p><p class="c53"><span class="c1">also has additional advantages. First, DCPGS uses geo-social split- ting criteria; for example, DCPGS splits clusters, which are spa- tially dense, but they are separated by barriers, such as rivers or walls, or visitors&rsquo; weak social connections. Second, DCPGS finds spatially loose clusters that include sets of places that (pairwise) are not very close to each other (and therefore violate a typically tight spatial density threshold), but have very tight social relationships with each other. Such places satisfy our DCPGS criteria. On the other hand, DBSCAN is less flexible in including them in the same cluster as loosening its spatial distance threshold would result in putting everything in a single huge cluster. Third, DCPGS can dis- cover geo-social clusters with fuzzy spatial boundaries; such clus- ters cannot be identified by spatial clustering, which defines strict spatial boundaries between clusters. Our evaluation is based on case studies and on the use of quantitative measures that we also propose in this paper. In addition, we demonstrate that the social distance measure we propose and use in DCPGS is more effective compared to alternative measures (based on node-to-node proxim- ity). Overall, the results of our evaluation indicate that the social relationships between users who visit places have great impact in the clustering of places and cannot be overlooked. </span></p><p class="c53"><span class="c1">In addition to the effectiveness of place clustering according to our DCPGS framework, we are also concerned about the efficient implementation of DCPGS in this paper. Real GeoSNs generate millions of checkins and contain millions of places, the efficient clustering of which is challenging. We present an intuitive imple- mentation of DCPGS, which applies repetitive range searches on a traditional spatial index (i.e., an R-tree), extending the original im- plementation of DBSCAN. In view of its high cost, we propose a much more efficient implementation, which relies on a dynamic grid partitioning technique, used to efficiently compute densely connected spatial neighborhoods of places. This grid-based im- plementation can cluster millions of GeoSN places in just a few seconds. Besides, the experiments demonstrate that our proposed social distance measure between places is very efficient to compute. </span></p><p class="c10"><span class="c1">Summing up, the contributions of this paper are as follows: </span></p><p class="c10"><span class="c2">&#9679; </span><span class="c1">We propose and formulate the problem of density-based clus- tering GeoSN places. </span></p><p class="c10"><span class="c2">&#9679; </span><span class="c1">We define a simple but effective social distance measure be- tween places in GeoSNs. </span></p><p class="c10"><span class="c2">&#9679; </span><span class="c1">We design efficient algorithms for implementing DCPGS. </span></p><p class="c53"><span class="c2">&#9679; </span><span class="c1">We demonstrate the effectiveness of DCPGS by case stud- ies and quantitative evaluation through two quality measures that are also devised in this paper. </span></p><p class="c10"><span class="c2">&#9679; </span><span class="c1">We experimentally analyze the efficiency of our methods. The rest of the paper is organized as follows. Section 2 formu- lates the DCPGS problem and defines the social distance measure between places that we use. DCPGS algorithms based on R-tree and grid partitioning are proposed in Section 3. The effectiveness and efficiency of our framework are analyzed in Sections 4 and 5, respectively. Related work is reviewed in Section 6. Finally, Sec- tion 7 concludes this paper and discusses future work. </span></p><p class="c10"><span class="c35">2. MODEL AND DEFINITIONS </span><span class="c1">Our data input includes three components: a</span><span class="c16">social network</span><span class="c1">, a set of </span><span class="c16">places </span><span class="c1">and the </span><span class="c16">checkins </span><span class="c1">of users to the places. The social network is an undirected graph </span><span class="c9">G </span><span class="c2">= (</span><span class="c9">U, E</span><span class="c2">)</span><span class="c1">, where </span><span class="c9">U </span><span class="c1">is the set of all users and each edge </span><span class="c2">(</span><span class="c9">u</span><span class="c6">i</span><span class="c23">,u</span><span class="c6">j</span><span class="c11">) &isin; </span><span class="c23">E </span><span class="c0">indicates that users </span><span class="c23">u</span><span class="c6">i</span><span class="c23">,u</span><span class="c6">j </span><span class="c11">&isin; </span><span class="c23">U </span><span class="c0">are friends. </span><span class="c1">Set </span><span class="c9">P </span><span class="c1">contains the set of all places visited by users, in the form of </span><span class="c2">&#10216;</span><span class="c16">latitude, longitude</span><span class="c2">&#10217; </span><span class="c1">GPS points. Thus, identifiers are assigned to places according to their distinct GPS coordinates. Set </span><span class="c9">CK </span><span class="c2">= {&#10216;</span><span class="c9">u</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">k</span><span class="c23">,t</span><span class="c6">r</span><span class="c11">&#10217;&#8739;</span><span class="c23">u</span><span class="c6">i </span><span class="c11">&isin; </span><span class="c23">U </span><span class="c0">and </span><span class="c23">p</span><span class="c6">k </span><span class="c11">&isin; </span><span class="c23">P</span><span class="c11">} </span><span class="c0">includes all checkins generated </span></p><p class="c10"><span class="c46">100 </span></p><p class="c53"><span class="c1">by users in </span><span class="c9">U</span><span class="c1">. For a place </span><span class="c9">p</span><span class="c6">k</span><span class="c0">, the set </span><span class="c23">U</span><span class="c6">p</span><span class="c18">k </span><span class="c1">of </span><span class="c16">visiting users </span><span class="c1">of </span><span class="c9">p</span><span class="c6">k </span><span class="c1">is defined by </span><span class="c9">U</span><span class="c6">p</span><span class="c18">k </span><span class="c2">= {</span><span class="c9">u</span><span class="c6">i</span><span class="c11">&#8739;&#10216;</span><span class="c23">u</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">k</span><span class="c23">,</span><span class="c11">&lowast;&#10217; &isin; </span><span class="c23">CK</span><span class="c11">}</span><span class="c0">, where </span><span class="c11">&lowast; </span><span class="c0">means any </span><span class="c1">time. Figure 1(b) shows </span><span class="c9">U</span><span class="c3">p</span><span class="c18">i </span><span class="c1">and </span><span class="c9">U</span><span class="c6">p</span><span class="c18">j </span><span class="c1">for the two places </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c9">p</span><span class="c6">j </span><span class="c0">of the toy example in Figure 1(a). The figure also connects the </span><span class="c1">user pairs in the two sets who are linked by friendship edges in the social network. Note that user </span><span class="c9">u</span><span class="c4">8 </span><span class="c0">does not belong to either </span><span class="c23">U</span><span class="c6">p</span><span class="c18">i </span><span class="c1">or </span><span class="c9">U</span><span class="c3">p</span><span class="c18">j</span><span class="c1">, but connects users </span><span class="c9">u</span><span class="c39">4 </span><span class="c1">and </span><span class="c9">u</span><span class="c39">7 </span><span class="c1">in the social graph. </span></p><p class="c10"><span class="c35">2.1 DCPGS Model </span><span class="c1">Our Density-based Clustering Places in Geo-Social Networks (DCPGS) model extends the model of DBSCAN [9]; for each place </span><span class="c9">p</span><span class="c3">i </span><span class="c1">in the GeoSN, DCPGS finds the </span><span class="c16">geo-social </span><span class="c9">&epsilon;</span><span class="c16">-neighborhood </span><span class="c9">N</span><span class="c6">&epsilon;</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c11">) </span><span class="c0">of </span><span class="c23">p</span><span class="c6">i</span><span class="c0">, which includes all places </span><span class="c23">p</span><span class="c6">j </span><span class="c0">such that </span><span class="c23">D</span><span class="c6">gs</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) &le; </span><span class="c9">&epsilon;</span><span class="c1">, </span><span class="c9">D</span><span class="c3">S</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">) &le; </span><span class="c9">&tau;</span><span class="c1">, and </span><span class="c9">E</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">) &le; </span><span class="c9">maxD</span><span class="c1">. For two places </span><span class="c9">p</span><span class="c3">i</span><span class="c1">, </span><span class="c9">p</span><span class="c6">j</span><span class="c0">, </span><span class="c23">E</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">is the </span><span class="c68">Euclidean distance</span><span class="c0">, </span><span class="c23">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">is the </span><span class="c68">social </span><span class="c16">distance</span><span class="c1">, and </span><span class="c9">D</span><span class="c6">gs</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) = </span><span class="c23">f</span><span class="c11">(</span><span class="c23">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">)</span><span class="c23">,E</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">)) </span><span class="c0">is the </span><span class="c68">geo- </span><span class="c16">social </span><span class="c1">distance, defined as a function of </span><span class="c9">E</span><span class="c2">(</span><span class="c9">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">and </span><span class="c23">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">)</span><span class="c0">. </span><span class="c1">Parameter </span><span class="c9">&epsilon; </span><span class="c1">is geo-social distance threshold, while </span><span class="c9">&tau; </span><span class="c1">and </span><span class="c9">maxD </span><span class="c1">are two </span><span class="c16">sanity </span><span class="c1">constraints for the social and the spatial distances be- tween places, respectively. We will give detailed definitions for all above distance functions and parameters later on. If the geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhood of a place </span><span class="c9">p</span><span class="c6">i </span><span class="c0">contains at least </span><span class="c23">MinPts </span><span class="c0">places, then </span><span class="c9">p</span><span class="c6">i </span><span class="c0">is a </span><span class="c68">core </span><span class="c0">place; in this case, </span><span class="c23">p</span><span class="c6">i </span><span class="c0">and all places in its geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhood should belong to a cluster </span><span class="c9">r</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c2">)</span><span class="c1">. If another core place </span><span class="c9">p</span><span class="c6">j </span><span class="c0">belongs to cluster </span><span class="c23">r</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c11">)</span><span class="c0">, then </span><span class="c23">r</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c11">) = </span><span class="c23">r</span><span class="c11">(</span><span class="c23">p</span><span class="c6">j</span><span class="c11">)</span><span class="c0">, i.e., the clus- </span><span class="c1">ters defined by </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j </span><span class="c1">are merged. After identifying all core places and merging the corresponding clusters, DCPGS ends up with a set of (disjoint) clusters and a set of outliers (i.e., places that do not belong to the geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhood of any core place). In Section 3, we present algorithms for generating DCPGS clusters. </span><span class="c2">Parameters. </span><span class="c9">&epsilon; </span><span class="c1">and </span><span class="c9">MinPts </span><span class="c1">are the main parameters of DCPGS. </span><span class="c9">MinPts </span><span class="c1">(i.e., the minimum number of places in the neighborhood of a core point) is set as in the original DBSCAN model (see [9]); a typical value is 5. </span><span class="c9">&epsilon; </span><span class="c1">takes a value between 0 and 1, because, as we explain later on, we define </span><span class="c9">D</span><span class="c6">gs</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">to take values in this range. </span><span class="c1">Since the geo-social distance </span><span class="c9">D</span><span class="c3">gs</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">) </span><span class="c1">is a function of a spatial and a social distance, </span><span class="c9">&tau; </span><span class="c1">and </span><span class="c9">maxD </span><span class="c1">constrain these individual dis- tances to avoid the following two cases that negatively affect the quality of geo-social clusters. </span></p><p class="c53"><span class="c2">&#9679; </span><span class="c1">The geo-social distance between two places </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j </span><span class="c0">could </span><span class="c1">be less than </span><span class="c9">&epsilon; </span><span class="c1">if they are extremely close to each other in space, but have no social connection at all. This may lead to putting places close to each other spatially, but having no social relationship, into the same cluster. </span></p><p class="c53"><span class="c2">&#9679; </span><span class="c1">The geo-social distance between two places </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j </span><span class="c1">could be less than </span><span class="c9">&epsilon; </span><span class="c1">if they have very small social distance, but they are extremely far from each other spatially. This may lead to putting places with close social distances, but large spatial distances, into the same cluster. </span></p><p class="c10"><span class="c1">Constraints </span><span class="c9">&tau; </span><span class="c1">and </span><span class="c9">maxD </span><span class="c1">are defined for quality control and can be set by experts or according to the analyst&rsquo;s experience. We ex- perimentally study how clustering quality is affected by the two constraints and </span><span class="c9">&epsilon; </span><span class="c1">in Section 4. </span><span class="c2">Distance Functions. </span><span class="c1">The social distance </span><span class="c9">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">takes as in- </span><span class="c1">puts the sets of users </span><span class="c9">U</span><span class="c6">p</span><span class="c18">i </span><span class="c1">and </span><span class="c9">U</span><span class="c6">p</span><span class="c18">j </span><span class="c1">who have visited </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j</span><span class="c0">, re- </span><span class="c1">spectively, and returns a value between 0 and 1. In Section 2.2, we present our definition for </span><span class="c9">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">and alternative ways to de- </span><span class="c1">fine it based on previous work. Before defining the geo-social dis- tance </span><span class="c9">D</span><span class="c6">gs</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">)</span><span class="c0">, we </span><span class="c68">normalize </span><span class="c0">the Euclidean distance </span><span class="c23">E</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c1">to a </span><span class="c16">spatial </span><span class="c1">distance </span><span class="c9">D</span><span class="c6">P </span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) = </span><span class="c3">E</span><span class="c15">(</span><span class="c3">p</span><span class="c18">i</span><span class="c3">,p</span><span class="c18">j</span><span class="c15">) </span></p><p class="c10"><span class="c3">maxD </span><span class="c19">that takes values be- </span><span class="c1">tween </span><span class="c2">0 </span><span class="c1">and </span><span class="c2">1</span><span class="c1">. Finally, </span><span class="c9">D</span><span class="c6">gs</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">is defined as weighted sum of </span></p><p class="c10"><span class="c9">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">and </span><span class="c23">D</span><span class="c6">P</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">)</span><span class="c0">, i.e., </span></p><p class="c10"><span class="c9">D</span><span class="c3">gs</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">) = </span><span class="c9">&omega; </span><span class="c2">&sdot; </span><span class="c9">D</span><span class="c3">P </span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">)+(1 &minus; </span><span class="c9">&omega;</span><span class="c2">) &sdot; </span><span class="c9">D</span><span class="c3">S</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">)</span><span class="c9">, </span><span class="c1">(1) </span></p><p class="c10"><span class="c1">where </span><span class="c9">&omega; </span><span class="c2">&isin; [0</span><span class="c9">,</span><span class="c2">1]</span><span class="c1">. </span></p><p class="c10"><span class="c87">2.1.1 Alternatives to DCPGS </span><span class="c1">Our place clustering model (DCPGS) extends density-based clus- tering in spatial databases. GeoSN places can alternatively be clus- tered by the use of graph clustering models. The main idea of such a model is to construct a </span><span class="c16">place network </span><span class="c9">PN</span><span class="c1">, which connects places according to their social and spatial distances and then apply an off-the-shelf community detection algorithm on </span><span class="c9">PN</span><span class="c1">. Specif- ically, given two places </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j</span><span class="c1">, if </span><span class="c9">E</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">) &le; </span><span class="c9">maxD </span><span class="c1">and </span><span class="c9">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) &le; </span><span class="c23">&tau;</span><span class="c0">, an </span><span class="c68">undirected </span><span class="c0">and </span><span class="c68">weighted </span><span class="c0">edge with geo-social </span><span class="c1">weight </span><span class="c9">W</span><span class="c6">gs</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) = 1 &minus; </span><span class="c23">D</span><span class="c6">gs</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">is added between </span><span class="c23">p</span><span class="c6">i </span><span class="c0">and </span><span class="c9">p</span><span class="c3">j</span><span class="c1">. Community detection algorithms like Link Clustering [1, 6] or Metis [16] can then be applied to derive the clusters. Link Clus- tering constructs a dendrogram of network communities (that may overlap) in a hierarchical manner. Metis is another multilevel graph partition paradigm that includes three phases: graph coarsening, initial partitioning, and uncoarsening; Metis divides a network into </span><span class="c9">k </span><span class="c1">non-overlapping communities. As we will show in Section 4, these graph clustering methods are inferior to DCPGS. </span><span class="c35">2.2 Social Distance Between Places </span><span class="c1">The social distance </span><span class="c9">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">between </span><span class="c23">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j </span><span class="c0">naturally de- </span><span class="c1">pends on the social network relationships between the sets </span><span class="c9">U</span><span class="c3">p</span><span class="c18">i </span><span class="c1">and </span><span class="c9">U</span><span class="c6">p</span><span class="c18">j </span><span class="c1">of users who visited </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j</span><span class="c0">, respectively. Our definition for </span><span class="c9">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">is based on the set </span><span class="c23">CU </span><span class="c6">ij </span><span class="c0">of </span><span class="c68">contributing users </span><span class="c0">between </span><span class="c1">two places </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j</span><span class="c1">: </span></p><p class="c53"><span class="c16">Definition 1. </span><span class="c1">(Contributing Users) Given two places </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j </span><span class="c1">with visiting users</span><span class="c9">U</span><span class="c3">p</span><span class="c18">i </span><span class="c1">and </span><span class="c9">U</span><span class="c3">p</span><span class="c18">j</span><span class="c1">, respectively, the set of contributing users </span><span class="c9">CU </span><span class="c6">ij </span><span class="c0">for the place pair </span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">is defined as </span></p><p class="c10"><span class="c9">CU </span><span class="c3">ij </span><span class="c2">= {</span><span class="c9">u</span><span class="c3">a </span><span class="c2">&isin; </span><span class="c9">U</span><span class="c3">p</span><span class="c18">i</span><span class="c2">&#8739;</span><span class="c9">u</span><span class="c3">a </span><span class="c2">&isin; </span><span class="c9">U</span><span class="c3">p</span><span class="c18">j </span><span class="c1">or </span><span class="c2">&exist;</span><span class="c9">u</span><span class="c6">b </span><span class="c11">&isin; </span><span class="c23">U</span><span class="c6">p</span><span class="c18">j</span><span class="c9">,</span><span class="c2">(</span><span class="c9">u</span><span class="c3">a</span><span class="c9">,u</span><span class="c6">b</span><span class="c11">) &isin; </span><span class="c23">E</span><span class="c11">} </span></p><p class="c10"><span class="c2">&cup; {</span><span class="c9">u</span><span class="c6">a </span><span class="c11">&isin; </span><span class="c23">U</span><span class="c6">p</span><span class="c18">j</span><span class="c2">&#8739;</span><span class="c9">u</span><span class="c6">a </span><span class="c11">&isin; </span><span class="c23">U</span><span class="c6">p</span><span class="c18">i </span><span class="c1">or </span><span class="c2">&exist;</span><span class="c9">u</span><span class="c6">b </span><span class="c11">&isin; </span><span class="c23">U</span><span class="c6">p</span><span class="c18">i</span><span class="c9">,</span><span class="c2">(</span><span class="c9">u</span><span class="c6">a</span><span class="c23">,u</span><span class="c6">b</span><span class="c11">) &isin; </span><span class="c23">E</span><span class="c11">} </span><span class="c0">(2) </span></p><p class="c53"><span class="c1">Specifically, if a user </span><span class="c9">u</span><span class="c6">a </span><span class="c0">has visited both </span><span class="c23">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j</span><span class="c0">, then </span><span class="c23">u</span><span class="c6">a </span><span class="c0">is </span><span class="c1">a contributing user. Also if </span><span class="c9">u</span><span class="c3">a </span><span class="c1">has visited place </span><span class="c9">p</span><span class="c3">i</span><span class="c1">, </span><span class="c9">u</span><span class="c6">b </span><span class="c0">has visited </span><span class="c9">p</span><span class="c6">j</span><span class="c0">, and </span><span class="c23">u</span><span class="c6">a </span><span class="c0">and </span><span class="c23">u</span><span class="c6">b </span><span class="c0">are friends, both </span><span class="c23">u</span><span class="c6">a </span><span class="c0">and </span><span class="c23">u</span><span class="c6">b </span><span class="c0">are contributing </span><span class="c1">users. Users in </span><span class="c9">CU </span><span class="c3">ij </span><span class="c1">contribute positively (negatively) to the social similarity (distance) between </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j</span><span class="c0">. Formally: </span></p><p class="c53"><span class="c16">Definition 2. </span><span class="c1">(Social Distance) Given two places </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j </span><span class="c1">with visiting users </span><span class="c9">U</span><span class="c6">p</span><span class="c18">i </span><span class="c1">and </span><span class="c9">U</span><span class="c6">p</span><span class="c18">j</span><span class="c1">, respectively, the </span><span class="c16">social distance </span><span class="c1">be- tween </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j </span><span class="c0">is defined as </span></p><p class="c10"><span class="c9">D</span><span class="c3">S</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">) = 1 &minus; </span><span class="c30">&#8739;</span><span class="c48">CU </span><span class="c33">ij</span><span class="c30">&#8739; </span></p><p class="c10"><span class="c2">&#8739;</span><span class="c9">U</span><span class="c3">p</span><span class="c18">i </span><span class="c2">&cup; </span><span class="c9">U</span><span class="c3">p</span><span class="c18">j</span><span class="c2">&#8739; </span><span class="c19">(3) </span></p><p class="c53"><span class="c1">The above definition of </span><span class="c9">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">takes both the set similarity </span><span class="c1">between sets </span><span class="c9">U</span><span class="c6">p</span><span class="c18">i </span><span class="c1">and </span><span class="c9">U</span><span class="c6">p</span><span class="c18">j </span><span class="c1">and the social relationships among users in </span><span class="c9">U</span><span class="c3">p</span><span class="c18">i </span><span class="c1">and </span><span class="c9">U</span><span class="c3">p</span><span class="c18">j </span><span class="c1">into account. In addition, the distance measure pe- nalizes pairs of places </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j </span><span class="c0">which are popular (i.e., </span><span class="c23">U</span><span class="c6">p</span><span class="c18">i </span><span class="c1">and/or </span><span class="c9">U</span><span class="c3">p</span><span class="c18">j </span><span class="c1">are large) but their set of contributing users is relatively small (see Equation 3). The reason is that such place pairs are not charac- teristic to their (loose) social connections. As an example, consider places </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j </span><span class="c1">of Figure 1. To compute </span><span class="c9">D</span><span class="c3">S</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">)</span><span class="c1">, we first set </span><span class="c9">U</span><span class="c6">p</span><span class="c18">i </span><span class="c2">= {</span><span class="c9">u</span><span class="c4">1</span><span class="c23">,u</span><span class="c4">2</span><span class="c23">,u</span><span class="c4">3</span><span class="c23">,u</span><span class="c4">4</span><span class="c11">} </span><span class="c0">and </span><span class="c23">U</span><span class="c6">p</span><span class="c18">j </span><span class="c2">= {</span><span class="c9">u</span><span class="c4">1</span><span class="c23">,u</span><span class="c4">2</span><span class="c23">,u</span><span class="c4">5</span><span class="c23">,u</span><span class="c4">6</span><span class="c23">,u</span><span class="c4">7</span><span class="c11">}</span><span class="c0">. All users </span><span class="c1">in </span><span class="c9">U</span><span class="c3">p</span><span class="c18">i </span><span class="c1">and </span><span class="c9">U</span><span class="c3">p</span><span class="c18">j </span><span class="c1">are checked one by one to obtain the contributing users between </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j</span><span class="c0">. We derive </span><span class="c23">CU </span><span class="c6">ij </span><span class="c11">= {</span><span class="c23">u</span><span class="c4">1</span><span class="c23">,u</span><span class="c4">2</span><span class="c23">,u</span><span class="c4">3</span><span class="c23">,u</span><span class="c4">5</span><span class="c23">,u</span><span class="c4">6</span><span class="c11">}</span><span class="c0">, </span><span class="c1">since (i) both </span><span class="c9">u</span><span class="c39">1 </span><span class="c1">and </span><span class="c9">u</span><span class="c39">2 </span><span class="c1">have visited </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j</span><span class="c1">, (ii) user </span><span class="c9">u</span><span class="c39">3</span><span class="c1">, who visited </span><span class="c9">p</span><span class="c6">i</span><span class="c0">, has a friend </span><span class="c23">u</span><span class="c4">6 </span><span class="c0">who visited </span><span class="c23">p</span><span class="c6">j</span><span class="c0">, (iii) symmetrically, user </span></p><p class="c10"><span class="c46">101 </span></p><p class="c75"><span class="c9">u</span><span class="c4">6</span><span class="c0">, who visited </span><span class="c23">p</span><span class="c6">j</span><span class="c0">, has a friend </span><span class="c23">u</span><span class="c4">3 </span><span class="c0">who visited </span><span class="c23">p</span><span class="c6">i</span><span class="c0">, and (iv) </span><span class="c23">u</span><span class="c4">5 </span><span class="c1">(</span><span class="c2">&isin; </span><span class="c1">2, </span><span class="c9">U</span><span class="c1">the </span><span class="c6">p</span><span class="c18">j</span><span class="c1">social ) has a distance friend </span><span class="c9">uD</span><span class="c3">S</span><span class="c2">(</span><span class="c9">p</span><span class="c4">2 </span><span class="c0">having </span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">been between to </span><span class="c23">p</span><span class="c6">i</span><span class="c0">. According to Definition </span><span class="c23">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j </span><span class="c0">in Figure 1 is </span><span class="c2">1 &minus; </span><span class="c1">Observe </span><span class="c2">&#8739;</span><span class="c9">CU </span><span class="c6">ij</span><span class="c11">&#8739;/(&#8739;</span><span class="c23">U</span><span class="c1">that </span><span class="c6">p</span><span class="c1">only </span><span class="c18">i </span><span class="c0">and </span><span class="c1">network </span><span class="c23">U</span><span class="c6">p</span><span class="c18">j </span><span class="c1">are considered paths, such </span><span class="c2">&cup; </span><span class="c9">U</span><span class="c1">direct </span><span class="c6">p</span><span class="c18">j</span><span class="c2">&#8739;) = </span><span class="c1">friendship </span><span class="c2">1 &minus; 5/7 &asymp; 0</span><span class="c9">.</span><span class="c2">2857</span><span class="c1">. </span></p><p class="c75"><span class="c1">edges between users of in our social distance definition. Longer </span><span class="c9">U</span><span class="c3">p</span><span class="c18">i </span><span class="c1">as friend-of-friend relationships, are ignored (e.g., the case of users </span><span class="c9">u</span><span class="c4">4 </span><span class="c0">and </span><span class="c23">u</span><span class="c4">7 </span><span class="c0">in Figure 1(b) who are connected </span><span class="c1">via user </span><span class="c9">u</span><span class="c4">8</span><span class="c0">). According to the small world effect [20], a user in a </span><span class="c1">social network can reach a large portion of other users within only few hops. For instance, the 90-percentile effective diameter [17] of Gowalla GeoSN, used in our experiments, is just 5.7.</span><span class="c17">4 </span><span class="c1">This means within quite a few hops most users can reach a very large percent- age of all users. In Gowalla, only 8 users can access more than </span><span class="c2">1% </span><span class="c1">of all the users in 1 hop, while 40516 users (</span><span class="c2">20</span><span class="c9">.</span><span class="c2">61% </span><span class="c1">of all the users) can access more than </span><span class="c2">1% </span><span class="c1">of all the users in 2 hops and 141582 users (</span><span class="c2">72</span><span class="c9">.</span><span class="c2">02% </span><span class="c1">of all the users) can reach more than </span><span class="c2">1% </span><span class="c1">of all the users in 3 hops. The number of users who can reach more than </span><span class="c2">1% </span><span class="c1">users in 2 or 3 hops increases dramatically compared to the percentage of those visited within 1 hop. Thus, paths longer than 1 hops are too common and cannot be considered as (indirect) user relationships; i.e., their impact is much weaker compared to di- rect friendship edges. Hence, Definition 2 introduces a simple, but powerful social distance measure. Properties of </span><span class="c9">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">include </span><span class="c16">symmetry </span><span class="c1">(i.e., </span><span class="c9">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) = </span><span class="c23">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">j</span><span class="c23">,p</span><span class="c6">i</span><span class="c11">)</span><span class="c0">) and </span><span class="c68">self-minimality </span><span class="c0">(i.e., </span><span class="c9">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">)&isin;[0</span><span class="c23">,</span><span class="c11">1]</span><span class="c0">, and </span><span class="c23">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c1">other hand, </span><span class="c9">D</span><span class="c3">S</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">) </span><span class="c1">does not obey </span><span class="c11">= 0 </span><span class="c0">for </span><span class="c1">the triangular </span><span class="c23">U</span><span class="c6">p</span><span class="c18">i </span><span class="c2">= </span><span class="c1">inequality, </span><span class="c9">U</span><span class="c6">p</span><span class="c18">j</span><span class="c1">). On the but this does not affect our clustering algorithm. </span></p><p class="c10"><span class="c87">2.2.1 Alternatives to </span><span class="c9">D</span><span class="c3">S </span><span class="c1">Our DCPGS model is independent of the social distance definition between places (i.e., </span><span class="c9">D</span><span class="c6">S</span><span class="c0">). As an alternative to our Definition 2, </span><span class="c1">the following measures can be used. In Section 4, we evaluate the effectiveness of these alternatives. </span><span class="c2">Jaccard. </span><span class="c1">Based on the Jaccard similarity </span><span class="c9">J</span><span class="c2">(</span><span class="c9">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c9">U</span><span class="c3">p</span><span class="c9">p</span><span class="c6">j</span><span class="c0">, </span><span class="c18">j</span><span class="c0">we </span><span class="c2">&#8739;)/(&#8739;</span><span class="c9">U</span><span class="c3">p</span><span class="c0">can define </span><span class="c18">i </span><span class="c2">&cup; </span><span class="c9">U</span><span class="c3">p</span><span class="c18">j</span><span class="c0">the </span><span class="c2">&#8739;) </span><span class="c1">between </span><span class="c0">following </span><span class="c1">the </span><span class="c0">distance: </span></p><p class="c10"><span class="c1">sets of visiting users </span><span class="c11">= </span><span class="c1">for </span><span class="c11">(&#8739;</span><span class="c23">U</span><span class="c9">p</span><span class="c3">i </span><span class="c6">p</span><span class="c1">and </span><span class="c18">i </span><span class="c2">&cap; </span></p><p class="c10"><span class="c9">D</span><span class="c3">S </span><span class="c33">Jac </span><span class="c30">(</span><span class="c48">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c6">j</span><span class="c11">) = 1 &minus; </span><span class="c23">J</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span></p><p class="c75"><span class="c9">D</span><span class="c1">suming </span><span class="c3">S </span><span class="c33">Jac </span><span class="c30">(</span><span class="c48">p</span><span class="c33">i</span><span class="c48">,p</span><span class="c33">j</span><span class="c30">) </span><span class="c1">that two </span><span class="c19">is not </span><span class="c1">users </span><span class="c19">intuitive; </span><span class="c1">who are </span><span class="c19">it </span><span class="c1">friends </span><span class="c19">disregards </span><span class="c1">do not </span><span class="c19">the </span><span class="c1">affect </span><span class="c19">social </span><span class="c1">each </span><span class="c19">network, </span><span class="c1">other </span><span class="c19">as- </span><span class="c1">in visiting GeoSN places. </span><span class="c2">SimRank. </span><span class="c1">SimRank is a structural-context model for measuring the similarity between nodes in a graph. The idea is that two nodes are equivalent if they relate to equivalent nodes. We can define a SimRank-based version visiting similar The gous similarity way. to users of </span><span class="c9">u</span><span class="c1">Specifically, </span></p><p class="c75"><span class="c1">SimRank </span><span class="c33">p</span><span class="c6">r </span><span class="c121">i</span><span class="c1">, </span><span class="c9">u</span><span class="c1">between to </span><span class="c33">p</span><span class="c6">r </span><span class="c121">i</span><span class="c1">social compute with [14].distance the users </span><span class="c17">5 </span><span class="c1">the visiting This </span><span class="c9">s</span><span class="c2">(</span><span class="c9">u</span><span class="c1">similarity </span><span class="c9">D</span><span class="c33">p</span><span class="c6">r </span><span class="c121">i</span><span class="c1">measure </span><span class="c3">S </span><span class="c33">sim</span><span class="c9">,u</span><span class="c1">user </span><span class="c30">(</span><span class="c48">p</span><span class="c33">p</span><span class="c6">s </span><span class="c121">j</span><span class="c11">) </span><span class="c3">i</span><span class="c9">,pu</span><span class="c1">between </span><span class="c33">p</span><span class="c6">s </span><span class="c0">is </span><span class="c121">j</span><span class="c6">j</span><span class="c11">)</span><span class="c0">, </span><span class="c1">compares </span><span class="c0">computed of using </span><span class="c23">p</span><span class="c6">j </span><span class="c1">places </span><span class="c0">who the </span><span class="c1">each </span><span class="c0">in is </span><span class="c9">s</span><span class="c2">(</span><span class="c9">p</span><span class="c0">an Minimax the </span><span class="c1">of </span><span class="c0">analo- </span><span class="c6">i</span><span class="c23">,p</span><span class="c0">most </span><span class="c9">p</span><span class="c6">j</span><span class="c11">)</span><span class="c0">. </span><span class="c6">i</span><span class="c0">&rsquo;s </span></p><p class="c10"><span class="c9">D</span><span class="c3">S </span><span class="c33">sim</span><span class="c30">(</span><span class="c48">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c6">j</span><span class="c11">) = 1 &minus; </span><span class="c23">s</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">)</span><span class="c23">, </span></p><p class="c10"><span class="c1">where </span><span class="c9">s</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">) = min(</span><span class="c9">s</span><span class="c3">p</span><span class="c18">i</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">)</span><span class="c9">,s</span><span class="c3">p</span><span class="c18">j</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">))</span><span class="c1">, </span><span class="c9">s</span><span class="c6">p</span><span class="c18">i</span><span class="c2">(</span><span class="c9">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) = </span><span class="c3">&phi; </span></p><p class="c10"><span class="c15">&#8739;</span><span class="c3">U</span><span class="c18">pi </span><span class="c15">&#8739; </span><span class="c30">&sum; </span></p><p class="c10"><span class="c3">u</span><span class="c18">r</span><span class="c45">&isin;</span><span class="c6">U</span><span class="c18">pi </span></p><p class="c10"><span class="c6">u</span><span class="c2">max </span><span class="c18">s</span><span class="c45">&isin;</span><span class="c6">U</span><span class="c18">pj </span><span class="c9">s</span><span class="c2">(</span><span class="c9">u</span><span class="c6">r</span><span class="c23">,u</span><span class="c6">s</span><span class="c11">)</span><span class="c0">, </span><span class="c1">where </span><span class="c9">&phi; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">8 </span><span class="c1">is a decay factor [14], </span><span class="c9">s</span><span class="c2">(</span><span class="c9">u</span><span class="c6">r</span><span class="c23">,u</span><span class="c6">s</span><span class="c11">) = min(</span><span class="c23">s</span><span class="c6">u</span><span class="c18">r</span><span class="c2">(</span><span class="c9">u</span><span class="c6">r</span><span class="c23">,u</span><span class="c6">s</span><span class="c11">)</span><span class="c23">,s</span><span class="c6">u</span><span class="c18">s</span><span class="c2">(</span><span class="c9">u</span><span class="c6">r</span><span class="c23">,u</span><span class="c6">s</span><span class="c11">))</span><span class="c23">, </span><span class="c0">and assuming that </span></p><p class="c10"><span class="c44">4</span><span class="c0">http://snap.stanford.edu/data/index.html </span><span class="c44">5</span><span class="c0">The original SimRank measure is only meant for node-to-node similarity; in our case, we need a measure between </span><span class="c23">U</span><span class="c6">p</span><span class="c18">i </span><span class="c1">and </span><span class="c9">U</span><span class="c6">p</span><span class="c18">j</span><span class="c1">. </span></p><p class="c10"><span class="c9">Ps</span><span class="c6">uu</span><span class="c18">rr </span><span class="c2">(</span><span class="c9">u</span><span class="c1">is </span><span class="c6">r</span><span class="c23">,u</span><span class="c1">the </span><span class="c6">s</span><span class="c11">) </span><span class="c1">set </span><span class="c11">= </span><span class="c1">of </span><span class="c15">&#8739;</span><span class="c3">P</span><span class="c1">places </span><span class="c3">&phi; </span></p><p class="c10"><span class="c18">ur </span><span class="c15">&#8739; </span><span class="c1">visited </span><span class="c30">&sum; </span><span class="c3">p</span><span class="c18">i</span><span class="c15">&isin;</span><span class="c3">P</span><span class="c18">ur </span></p><p class="c50"><span class="c1">by </span><span class="c9">u</span><span class="c6">r</span><span class="c0">, </span><span class="c6">p</span><span class="c2">max </span><span class="c18">j</span><span class="c15">&isin;</span><span class="c3">P</span><span class="c18">us </span><span class="c9">s</span><span class="c2">(</span><span class="c9">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">)</span><span class="c0">. </span><span class="c2">Katz. </span><span class="c1">The Katz similarity measure [34] sums over all possible paths </span><span class="c2">K(</span><span class="c9">u</span><span class="c6">r</span><span class="c23">,u</span><span class="c1">from </span><span class="c6">s</span><span class="c11">) = </span></p><p class="c75"><span class="c1">user </span><span class="c11">&sum;</span><span class="c15">&infin;</span><span class="c9">u</span><span class="c3">r </span><span class="c1">to </span><span class="c9">u</span><span class="c3">s </span><span class="c1">with exponential damping by length, i.e., </span><span class="c6">l</span><span class="c45">=</span><span class="c4">1</span><span class="c9">&beta;</span><span class="c33">l</span><span class="c2">&#8739;</span><span class="c9">paths</span><span class="c33">l</span><span class="c3">u</span><span class="c18">r</span><span class="c6">,u</span><span class="c18">s</span><span class="c2">&#8739;</span><span class="c1">, where </span><span class="c9">paths</span><span class="c33">l</span><span class="c3">u</span><span class="c18">r</span><span class="c6">,u</span><span class="c18">s </span><span class="c1">is the set of all length-</span><span class="c9">l </span><span class="c1">paths from </span><span class="c9">u</span><span class="c6">r </span><span class="c0">to </span><span class="c23">u</span><span class="c6">s</span><span class="c0">, and damping factor </span><span class="c23">&beta; </span><span class="c0">is typically set </span><span class="c1">to 0.05. Due to the poor scalability of this measurement, in practice only paths up to length </span><span class="c9">L </span><span class="c1">are considered [33]; i.e., an approximated </span></p><p class="c10"><span class="c1">Katz score </span><span class="c2">K</span><span class="c6">a</span><span class="c11">(</span><span class="c23">u</span><span class="c6">r</span><span class="c23">,u</span><span class="c6">s</span><span class="c11">) = </span></p><p class="c53"><span class="c11">&sum;</span><span class="c3">L</span><span class="c6">l</span><span class="c45">=</span><span class="c4">1</span><span class="c9">&beta;</span><span class="c33">l</span><span class="c2">&#8739;</span><span class="c9">paths</span><span class="c33">l</span><span class="c3">u</span><span class="c18">r</span><span class="c6">,u</span><span class="c18">s</span><span class="c2">&#8739; </span><span class="c1">can be used. Accord- ingly, we can define a Katz-based social distance between places </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c6">j</span><span class="c0">, by averaging the normalized Katz similarities between all </span><span class="c1">pairs of users from </span><span class="c9">U</span><span class="c6">p</span><span class="c18">i </span><span class="c1">and </span><span class="c9">U</span><span class="c6">p</span><span class="c18">j</span><span class="c1">: </span></p><p class="c10"><span class="c9">D</span><span class="c3">S </span><span class="c33">Katz </span><span class="c30">(</span><span class="c48">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c6">j</span><span class="c11">) = 1 &minus; </span><span class="c2">1 </span></p><p class="c10"><span class="c2">&#8739;</span><span class="c9">U</span><span class="c3">p</span><span class="c18">i</span><span class="c2">&#8739;&#8739;</span><span class="c9">U</span><span class="c3">p</span><span class="c18">j</span><span class="c2">&#8739; </span><span class="c30">&sum; </span></p><p class="c10"><span class="c3">u</span><span class="c18">r</span><span class="c45">&isin;</span><span class="c6">U</span><span class="c18">pi </span></p><p class="c10"><span class="c2">K</span><span class="c6">a</span><span class="c11">(</span><span class="c23">u</span><span class="c6">r</span><span class="c23">,u</span><span class="c6">s</span><span class="c11">) </span></p><p class="c53"><span class="c2">CommuteTime. </span><span class="c1">The hitting time </span><span class="c9">h</span><span class="c2">(</span><span class="c9">u</span><span class="c3">r</span><span class="c9">,u</span><span class="c3">s</span><span class="c2">) </span><span class="c1">from </span><span class="c9">u</span><span class="c3">r </span><span class="c1">to </span><span class="c9">u</span><span class="c3">s </span><span class="c1">is the expected number of steps required for a random walk starting at </span><span class="c9">u</span><span class="c6">r </span><span class="c1">to reach </span><span class="c9">u</span><span class="c6">s</span><span class="c0">. The commute time between </span><span class="c23">u</span><span class="c6">r </span><span class="c0">and </span><span class="c23">u</span><span class="c6">s </span><span class="c0">is defined by </span><span class="c9">ct</span><span class="c2">(</span><span class="c9">u</span><span class="c3">r</span><span class="c9">,u</span><span class="c3">s</span><span class="c2">) = </span><span class="c9">h</span><span class="c2">(</span><span class="c9">u</span><span class="c3">r</span><span class="c9">,u</span><span class="c3">s</span><span class="c2">) + </span><span class="c9">h</span><span class="c2">(</span><span class="c9">u</span><span class="c3">s</span><span class="c9">,u</span><span class="c3">r</span><span class="c2">)</span><span class="c1">. However, the commute time is sensitive to long paths and favors nodes of high degree. Thus, the </span><span class="c16">truncated commute time </span><span class="c1">[26], which considers only paths of length no longer than </span><span class="c9">L</span><span class="c1">, can be used to model the social distance between a pair of users. Finally, we can define a commute time based social distance between places </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c6">j </span><span class="c0">as follows: </span></p><p class="c10"><span class="c9">D</span><span class="c3">S </span><span class="c33">ct</span><span class="c30">(</span><span class="c48">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c6">j</span><span class="c11">) = </span><span class="c2">1 </span></p><p class="c10"><span class="c2">&#8739;</span><span class="c9">U</span><span class="c6">p</span><span class="c18">i</span><span class="c2">&#8739;&#8739;</span><span class="c9">U</span><span class="c6">p</span><span class="c18">j</span><span class="c2">&#8739; </span><span class="c30">&sum; </span></p><p class="c10"><span class="c3">u</span><span class="c18">r</span><span class="c45">&isin;</span><span class="c6">U</span><span class="c18">pi </span></p><p class="c50"><span class="c2">&sum; </span><span class="c3">u</span><span class="c18">s</span><span class="c45">&isin;</span><span class="c6">U</span><span class="c18">pj </span></p><p class="c10"><span class="c9">ct</span><span class="c33">L</span><span class="c2">(</span><span class="c9">u</span><span class="c6">r</span><span class="c23">,u</span><span class="c6">s</span><span class="c11">) </span></p><p class="c10"><span class="c1">where </span><span class="c9">ct</span><span class="c33">L</span><span class="c2">(</span><span class="c9">u</span><span class="c6">r</span><span class="c23">,u</span><span class="c6">s</span><span class="c11">) </span><span class="c0">is the normalized truncated commute time. </span></p><p class="c10"><span class="c35">3. ALGORITHMS </span><span class="c1">We propose two algorithms for DCPGS. DCPGS-R (Section 3.1) is based on the R-tree index, while DCPGS-G (Section 3.2) uses a grid partitioning. </span></p><p class="c10"><span class="c35">3.1 Algorithm DCPGS-R: R-tree based </span><span class="c1">Algorithm DCPGS-R is a direct extension of the DBSCAN algo- rithm; it uses an R-tree to facilitate the search of the geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhood for a given place. Initially, all places in the GeoSN are bulk-loaded into an R-tree. Then, DCPGS-R examines all places and, given a place </span><span class="c9">p</span><span class="c3">i</span><span class="c1">, it performs a range query centered at </span><span class="c9">p</span><span class="c6">i </span><span class="c0">with radius </span><span class="c23">maxD </span><span class="c0">to get a set of </span><span class="c68">candidate places </span><span class="c0">that may </span><span class="c1">fall in the geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhood of </span><span class="c9">p</span><span class="c6">i</span><span class="c0">, i.e., </span><span class="c23">N</span><span class="c6">&epsilon;</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c11">)</span><span class="c0">. Recall </span><span class="c1">that </span><span class="c9">maxD </span><span class="c1">is the maximum allowed spatial distance between place </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and places in its geo-social </span><span class="c23">&epsilon;</span><span class="c0">-neighborhood. Then, DCPGS-R </span><span class="c1">keeps in </span><span class="c9">N</span><span class="c3">&epsilon;</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c2">) </span><span class="c1">only the candidates that satisfy the social distance constraint </span><span class="c9">&tau; </span><span class="c1">and the geo-social distance threshold </span><span class="c9">&epsilon;</span><span class="c1">. </span></p><p class="c75"><span class="c1">For the sake of efficiency, the social network is stored in a hash table. Specifically, each pair of friends in the social network is recorded as an entry in the hash table, such that checking whether two users are friends or not only incurs constant cost. In addition, for each place </span><span class="c9">p</span><span class="c6">i</span><span class="c0">, we keep track of </span><span class="c1">putation of the social distance (Definition </span><span class="c0">its visiting </span><span class="c1">2) between </span><span class="c0">users </span><span class="c23">U</span><span class="c1">two </span><span class="c6">p</span><span class="c18">i</span><span class="c1">. The com- places </span><span class="c9">p</span><span class="c6">i </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j </span><span class="c1">involves finding the pairs of friends between </span><span class="c9">U</span><span class="c1">to </span><span class="c6">p</span><span class="c1">compute </span><span class="c18">j </span><span class="c1">and has insignificant cost compared the set of candidate places. </span></p><p class="c10"><span class="c1">to the range sets queries </span><span class="c9">U</span><span class="c3">p</span><span class="c18">i </span><span class="c1">used and </span></p><p class="c53"><span class="c1">Algorithm 1 is the pseudocode of DCPGS-R. The identity of the current cluster </span><span class="c9">cid </span><span class="c1">is initialized to 1 in line 1. Queue </span><span class="c9">Q </span><span class="c1">(initialized in line 2) stores the places that have the potential to be added to the </span></p><p class="c10"><span class="c46">102 </span></p><p class="c50"><span class="c2">&sum; </span><span class="c3">u</span><span class="c18">s</span><span class="c45">&isin;</span><span class="c6">U</span><span class="c18">pj </span></p><p class="c53 c115"><span class="c1">current cluster. Hash table </span><span class="c9">H </span><span class="c1">records whether the geo-social dis- tances between pairs of places have been computed before (line 3) and its use will be explained later. For each </span><span class="c16">unprocessed </span><span class="c1">place </span><span class="c9">p</span><span class="c3">i</span><span class="c1">, its geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhood </span><span class="c9">N</span><span class="c6">&epsilon;</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c11">) </span><span class="c0">is obtained by calling func- </span><span class="c1">tion G</span><span class="c51">ET</span><span class="c1">N</span><span class="c51">EIGH</span><span class="c1">(</span><span class="c9">p</span><span class="c3">i</span><span class="c1">, </span><span class="c9">&epsilon;</span><span class="c1">, </span><span class="c9">&tau;</span><span class="c1">, </span><span class="c9">maxD</span><span class="c1">, </span><span class="c9">MinPts</span><span class="c1">, </span><span class="c9">&omega;</span><span class="c1">, </span><span class="c9">H</span><span class="c1">), outlined in Al- gorithm 2. A place is </span><span class="c16">unprocessed </span><span class="c1">if its geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhood has not been computed before. If </span><span class="c9">N</span><span class="c3">&epsilon;</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c2">) </span><span class="c1">contains at least </span><span class="c9">MinPts </span><span class="c1">places, then </span><span class="c9">p</span><span class="c6">i </span><span class="c0">is a </span><span class="c68">core </span><span class="c0">place, i.e., </span><span class="c23">p</span><span class="c6">i </span><span class="c0">belongs to a cluster and all </span><span class="c1">places in </span><span class="c9">N</span><span class="c6">&epsilon;</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c11">) </span><span class="c0">should be given the same </span><span class="c23">cid </span><span class="c0">as </span><span class="c23">p</span><span class="c6">i </span><span class="c0">(lines 6-11). </span><span class="c1">Next, all unprocessed places in </span><span class="c9">N</span><span class="c3">&epsilon;</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c2">) </span><span class="c1">are pushed into </span><span class="c9">Q </span><span class="c1">for later processing. Lines 12-20 expand the current cluster </span><span class="c9">cid </span><span class="c1">as much as possible by checking the geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhood of the unpro- cessed places in </span><span class="c9">Q</span><span class="c1">. No more places can be included in the current cluster when </span><span class="c9">Q </span><span class="c1">is empty. In this case, the algorithm proceeds to find the next cluster (</span><span class="c9">cid </span><span class="c1">is increased in line 21). </span></p><p class="c77"><span class="c2">Algorithm 1 </span><span class="c1">DCPGS-R(GeoSN, </span><span class="c9">&epsilon;</span><span class="c1">, </span><span class="c9">&tau;</span><span class="c1">, </span><span class="c9">maxD</span><span class="c1">, </span><span class="c9">MinPts</span><span class="c1">, </span><span class="c9">&omega;</span><span class="c1">) 1: </span><span class="c12">cid </span><span class="c31">= 1 </span><span class="c0">2: </span><span class="c8">Q </span><span class="c21">= </span><span class="c8">empty </span><span class="c0">3: </span><span class="c22">Geo-social distance cache </span><span class="c8">H </span><span class="c0">4: </span><span class="c21">for each </span><span class="c40">unprocessed </span><span class="c22">place </span><span class="c8">p</span><span class="c6">i </span><span class="c7">in GeoSN </span><span class="c31">do </span><span class="c0">5: </span><span class="c8">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">i</span><span class="c21">) = </span><span class="c22">G</span><span class="c56">ET</span><span class="c22">N</span><span class="c56">EIGH</span><span class="c22">(</span><span class="c8">p</span><span class="c6">i</span><span class="c22">, </span><span class="c8">&epsilon;</span><span class="c22">, </span><span class="c8">&tau;</span><span class="c22">, </span><span class="c8">maxD</span><span class="c22">, </span><span class="c8">MinPts</span><span class="c22">, </span><span class="c8">&omega;</span><span class="c22">, </span><span class="c8">H</span><span class="c22">) </span><span class="c0">6: </span><span class="c21">if &#8739;</span><span class="c8">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">i</span><span class="c21">)&#8739; &ge; </span><span class="c8">MinPts </span><span class="c21">then </span><span class="c0">7: </span><span class="c22">assign </span><span class="c8">cid </span><span class="c22">to </span><span class="c8">p</span><span class="c6">i </span><span class="c0">8: </span><span class="c21">for each </span><span class="c22">place </span><span class="c8">p</span><span class="c6">j </span><span class="c21">&isin; </span><span class="c8">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">i</span><span class="c21">) do </span><span class="c0">9: </span><span class="c22">assign </span><span class="c8">cid </span><span class="c22">to </span><span class="c8">p</span><span class="c6">j </span><span class="c0">10: </span><span class="c21">if </span><span class="c8">p</span><span class="c6">j </span><span class="c7">is </span><span class="c26">unprocessed </span><span class="c31">then </span><span class="c0">11: </span><span class="c8">Q.push</span><span class="c21">(</span><span class="c8">p</span><span class="c6">j</span><span class="c21">) </span><span class="c1">12: </span><span class="c31">while !</span><span class="c12">Q.isEmpty</span><span class="c31">() do </span><span class="c0">13: </span><span class="c8">p</span><span class="c6">k </span><span class="c7">= </span><span class="c12">Q.pop</span><span class="c7">() </span><span class="c0">14: </span><span class="c21">if </span><span class="c8">p</span><span class="c6">k </span><span class="c7">is </span><span class="c26">unprocessed </span><span class="c31">then </span><span class="c0">15: </span><span class="c8">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">k</span><span class="c31">) = </span><span class="c7">G</span><span class="c120">ET</span><span class="c7">N</span><span class="c120">EIGH</span><span class="c7">(</span><span class="c12">p</span><span class="c6">k</span><span class="c7">, </span><span class="c12">&epsilon;</span><span class="c7">, </span><span class="c12">&tau;</span><span class="c7">, </span><span class="c12">maxD</span><span class="c7">, </span><span class="c12">MinPts</span><span class="c7">, </span><span class="c12">&omega;</span><span class="c7">, </span><span class="c12">H</span><span class="c7">) </span><span class="c0">16: </span><span class="c21">if &#8739;</span><span class="c8">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">k</span><span class="c31">)&#8739; &ge; </span><span class="c12">MinPts </span><span class="c31">then </span><span class="c0">17: </span><span class="c21">for each </span><span class="c22">place </span><span class="c8">p</span><span class="c6">m </span><span class="c21">&isin; </span><span class="c8">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">k</span><span class="c31">) do </span><span class="c0">18: </span><span class="c22">assign </span><span class="c8">cid </span><span class="c22">to </span><span class="c8">p</span><span class="c6">m </span><span class="c0">19: </span><span class="c21">if </span><span class="c8">p</span><span class="c6">m </span><span class="c22">is </span><span class="c40">unprocessed </span><span class="c21">then </span><span class="c0">20: </span><span class="c8">Q.push</span><span class="c21">(</span><span class="c8">p</span><span class="c6">m</span><span class="c21">) </span><span class="c1">21: </span><span class="c12">cid </span><span class="c31">= </span><span class="c12">cid </span><span class="c31">+ 1 </span></p><p class="c60"><span class="c1">Function G</span><span class="c51">ET</span><span class="c1">N</span><span class="c51">EIGH</span><span class="c1">, shown in Algorithm 2, is used to get the geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhood of place </span><span class="c9">p</span><span class="c6">i</span><span class="c0">. Initially </span><span class="c23">N</span><span class="c6">&epsilon;</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c11">) </span><span class="c0">is empty. </span><span class="c1">Lines 2-4 first perform a spatial range query centered at the current place </span><span class="c9">p</span><span class="c3">i </span><span class="c1">with radius </span><span class="c9">maxD </span><span class="c1">to get a candidate set </span><span class="c9">CandSet </span><span class="c1">con- taining the places that may fall in </span><span class="c9">N</span><span class="c6">&epsilon;</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c11">)</span><span class="c0">. If the size of </span><span class="c23">CandSet </span><span class="c1">is less than </span><span class="c9">MinPts</span><span class="c1">, </span><span class="c9">N</span><span class="c3">&epsilon;</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c2">) </span><span class="c1">definitely includes less than </span><span class="c9">MinPts </span><span class="c1">places and, therefore, </span><span class="c9">p</span><span class="c6">i </span><span class="c0">is a non-core place. Otherwise, the al- </span><span class="c1">gorithm tries to compute the social distance between every point </span><span class="c9">p</span><span class="c3">j </span><span class="c2">&isin; </span><span class="c9">CandSet </span><span class="c1">and </span><span class="c9">p</span><span class="c3">i</span><span class="c1">. However, before this, given the fact that the spatial distance between </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and every candidate place </span><span class="c23">p</span><span class="c6">j </span><span class="c0">is already </span><span class="c1">obtained in the spatial range query step, a </span><span class="c16">spatial filter </span><span class="c1">is employed to avoid unnecessary social distance computations (line 6). </span></p><p class="c115 c151"><span class="c1">P</span><span class="c51">ROPOSITION </span><span class="c1">1. </span><span class="c16">Spatial filter. Given two places </span><span class="c9">p</span><span class="c3">i </span><span class="c16">and </span><span class="c9">p</span><span class="c3">j </span><span class="c16">with spatial distance </span><span class="c9">D</span><span class="c6">P</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">)</span><span class="c68">, if </span><span class="c23">&omega; </span><span class="c11">&sdot; </span><span class="c23">D</span><span class="c6">P</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) &gt; </span><span class="c23">&epsilon;</span><span class="c68">, then </span><span class="c9">&omega; </span><span class="c2">&sdot; </span><span class="c9">D</span><span class="c6">P</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">)+(1 &minus; </span><span class="c23">&omega;</span><span class="c11">) &sdot; </span><span class="c23">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) &gt; </span><span class="c23">&epsilon;</span><span class="c68">. </span></p><p class="c115 c169"><span class="c1">P</span><span class="c51">ROOF</span><span class="c1">. Since </span><span class="c9">&omega; </span><span class="c2">&isin; [0</span><span class="c9">,</span><span class="c2">1] </span><span class="c1">and </span><span class="c9">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) &isin; [0</span><span class="c23">,</span><span class="c11">1]</span><span class="c0">, </span><span class="c11">(1 &minus; </span><span class="c23">&omega;</span><span class="c11">) &sdot; </span><span class="c9">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) &ge; 0</span><span class="c0">. Consequently, if </span><span class="c23">&omega; </span><span class="c11">&sdot; </span><span class="c23">D</span><span class="c6">P</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) &gt; </span><span class="c23">&epsilon;</span><span class="c0">, then </span><span class="c23">&omega; </span><span class="c11">&sdot; </span><span class="c9">D</span><span class="c6">P</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">)+(1 &minus; </span><span class="c23">&omega;</span><span class="c11">) &sdot; </span><span class="c23">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) &gt; </span><span class="c23">&epsilon;</span><span class="c0">. </span></p><p class="c115 c160"><span class="c1">Note that distances </span><span class="c9">D</span><span class="c6">gs </span><span class="c0">and </span><span class="c23">D</span><span class="c6">S </span><span class="c0">and </span><span class="c23">D</span><span class="c6">P </span><span class="c0">are all symmetric. </span><span class="c1">Hence, given a place </span><span class="c9">p</span><span class="c3">i</span><span class="c1">, if </span><span class="c9">p</span><span class="c3">j </span><span class="c1">is (not) in </span><span class="c9">N</span><span class="c3">&epsilon;</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c2">)</span><span class="c1">, then </span><span class="c9">p</span><span class="c3">i </span><span class="c1">is also (not) in </span><span class="c9">N</span><span class="c6">&epsilon;</span><span class="c11">(</span><span class="c23">p</span><span class="c6">j</span><span class="c11">)</span><span class="c0">, and vice versa. Therefore, we keep track in a </span><span class="c1">hash table </span><span class="c9">H </span><span class="c1">(line 14) whether </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j </span><span class="c1">are in each other&rsquo;s geo- social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhood once their geo-social distance has been com- puted. This information is used when computing the geo-social </span><span class="c9">&epsilon;</span><span class="c1">- neighborhood of </span><span class="c9">p</span><span class="c6">j </span><span class="c0">later (line 7-9), in order to avoid computing </span></p><p class="c53 c117"><span class="c1">the distance between the same pair of places twice. Lines 11-15 compute distances, verify candidates, and update </span><span class="c9">H </span><span class="c1">if necessary. Line 16 is another filter, called </span><span class="c16">sufficient filter</span><span class="c1">, to check whether there are enough remaining candidate places in </span><span class="c9">CandSet </span><span class="c1">to render </span><span class="c9">p</span><span class="c3">i</span><span class="c1">&rsquo;s geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhood dense. If no, the algorithm can stop without checking the remaining candidate places and return. </span></p><p class="c13"><span class="c2">Algorithm 2 </span><span class="c1">G</span><span class="c51">ET</span><span class="c1">N</span><span class="c51">EIGH</span><span class="c1">(</span><span class="c9">p</span><span class="c6">i</span><span class="c0">, </span><span class="c23">&epsilon;</span><span class="c0">, </span><span class="c23">&tau;</span><span class="c0">, </span><span class="c23">maxD</span><span class="c0">, </span><span class="c23">MinPts</span><span class="c0">, </span><span class="c23">&omega;</span><span class="c0">, </span><span class="c23">H</span><span class="c0">) </span><span class="c1">1: </span><span class="c0">2: 3: </span><span class="c12">N</span><span class="c8">CandSet </span><span class="c21">if </span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c21">&#8739;</span><span class="c8">CandSet</span><span class="c21">&#8739; </span><span class="c6">i</span><span class="c31">)&larr;&empty; </span><span class="c22">= R</span><span class="c56">ANGE</span><span class="c22">Q</span><span class="c56">UERY</span><span class="c22">(</span><span class="c8">p</span><span class="c21">&lt; </span><span class="c8">MinPts </span><span class="c21">then </span><span class="c6">i</span><span class="c8">,maxD</span><span class="c22">) </span><span class="c0">4: </span><span class="c21">return </span><span class="c8">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">i</span><span class="c31">) </span><span class="c1">5: </span><span class="c0">6: 7: 8: 9: </span><span class="c31">for each </span><span class="c21">if </span><span class="c8">&omega; </span><span class="c21">&sdot; if </span><span class="c7">place </span><span class="c8">DH.exists</span><span class="c21">((</span><span class="c8">p</span><span class="c21">if </span><span class="c6">P </span><span class="c31">(</span><span class="c12">p</span><span class="c8">H</span><span class="c21">[(</span><span class="c8">pN</span><span class="c12">p</span><span class="c6">ij </span><span class="c12">,p</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c21">&isin; </span><span class="c6">i</span><span class="c8">,p</span><span class="c6">j</span><span class="c8">CandSet </span><span class="c31">) </span><span class="c6">i</span><span class="c31">)</span><span class="c12">.insert</span><span class="c31">(</span><span class="c12">p</span><span class="c31">&le; </span><span class="c6">j</span><span class="c21">)] </span><span class="c6">i</span><span class="c8">,p</span><span class="c12">&epsilon; </span><span class="c21">do </span><span class="c31">then </span><span class="c6">j</span><span class="c21">)) </span><span class="c22">is </span><span class="c40">TRUE </span><span class="c21">then then </span><span class="c6">j</span><span class="c31">) </span><span class="c1">10: </span><span class="c31">else </span><span class="c0">11: 12: 13: 14: </span><span class="c22">Compute </span><span class="c21">if </span><span class="c8">DN</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">pH</span><span class="c21">[(</span><span class="c8">p</span><span class="c6">S</span><span class="c31">(</span><span class="c12">p</span><span class="c6">i</span><span class="c12">,p</span><span class="c6">i</span><span class="c21">)</span><span class="c8">.insert</span><span class="c21">(</span><span class="c8">p</span><span class="c6">i</span><span class="c8">D</span><span class="c12">,p</span><span class="c6">Sjj</span><span class="c31">) (</span><span class="c12">p</span><span class="c31">)] &le; </span><span class="c6">i</span><span class="c12">,p&tau; </span><span class="c31">&larr; &amp;&amp; </span><span class="c6">j</span><span class="c26">TRUE </span><span class="c31">) </span><span class="c6">j</span><span class="c21">) </span><span class="c7">and </span><span class="c12">D</span><span class="c6">gs</span><span class="c21">(</span><span class="c8">p</span><span class="c12">D</span><span class="c6">gs</span><span class="c21">(</span><span class="c8">p</span><span class="c6">i</span><span class="c12">,p</span><span class="c6">ij</span><span class="c12">,p</span><span class="c31">) </span><span class="c6">j</span><span class="c31">&le; ) </span><span class="c12">&epsilon; </span><span class="c31">then </span><span class="c1">15: </span><span class="c0">16: </span><span class="c12">CandSet.erase</span><span class="c31">(</span><span class="c12">p</span><span class="c21">if &#8739;</span><span class="c8">CandSet</span><span class="c21">&#8739;+&#8739;</span><span class="c8">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">j</span><span class="c21">) </span><span class="c6">i</span><span class="c21">)&#8739; &lt; </span><span class="c8">MinPts </span><span class="c21">then break </span><span class="c1">17: </span><span class="c31">return </span><span class="c12">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">i</span><span class="c31">) </span></p><p class="c117 c153"><span class="c35">3.2 Algorithm DCPGS-G: Grid based </span><span class="c1">DCPGS-R conducts a spatial range query for each place in the GeoSN to obtain the candidate places for the purpose of discov- ering geo-social clusters. Even though individual R-tree based range queries are very efficient, discovering geo-social clusters in a GeoSN with millions of places requires millions of such queries (e.g., there are 1,280,969 places in the Gowalla dataset used in our experiments). Given two places </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j </span><span class="c0">that are spatially </span><span class="c1">close to each other, as Figure 2(a) shows, the results of the two range queries with radius </span><span class="c9">maxD </span><span class="c1">centered at </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j</span><span class="c0">, respectively, </span><span class="c1">are almost identical. In algorithm DCPGS-R, to get the candidate places </span><span class="c9">CandSet </span><span class="c1">for each place in Figure 2(a), 8 independent range queries are issued on the R-tree that search almost the same space, resulting in redundant traversing paths and computations. To over- come this drawback, we develop a dynamic grid partitioning tech- nique and a new algorithm DCPGS-G. </span></p><p class="c187"><span class="c26">p</span><span class="c175">i </span><span class="c40">p</span><span class="c175">j </span></p><p class="c10 c168"><span class="c142">maxD </span></p><p class="c185"><span class="c193">2 </span><span class="c99">maxD </span></p><p class="c158"><span class="c44">2 </span></p><p class="c111"><span class="c90">maxD </span><span class="c144">maxD </span></p><p class="c10 c113"><span class="c54">maxD </span></p><p class="c10 c113"><span class="c54">maxD </span></p><p class="c83"><span class="c54">maxD </span></p><p class="c10 c179"><span class="c54">maxD </span></p><p class="c177"><span class="c54">maxD </span></p><p class="c170"><span class="c1">(a) Nearby spatial range queries </span></p><p class="c10 c156"><span class="c54">maxD </span></p><p class="c10 c156"><span class="c54">maxD </span></p><p class="c10 c156"><span class="c54">maxD </span></p><p class="c152 c178"><span class="c1">(b) Grid partitioning </span></p><p class="c10 c152"><span class="c1">(b) Grid partitioning </span></p><p class="c173"><span class="c2">Figure 2: Nearby spatial range queries and grid partitioning </span></p><p class="c117 c118"><span class="c2">Grid </span><span class="c1">by a regular </span><span class="c2">Partitioning. </span><span class="c1">grid with The cells area of covered size </span><span class="c9">maxD</span><span class="c2">/</span><span class="c1">by the </span><span class="c30">&radic;</span><span class="c1">dataset </span><span class="c2">2 &times; </span><span class="c9">maxD</span><span class="c2">/</span><span class="c1">is partitioned </span><span class="c30">&radic;</span><span class="c2">2</span><span class="c1">. The non-empty cells of the grid are indexed by a hash table with the grid cell coordinates as search keys. </span><span class="c2">Neighbor Cells. </span><span class="c1">The neighbor cells of a cell </span><span class="c9">c </span><span class="c1">are the cells that intersect the union of four circles, each centered at a corner of cell </span></p><p class="c88"><span class="c46">103 </span></p><p class="c10 c115"><span class="c9">c </span><span class="c1">with radius </span><span class="c9">maxD</span><span class="c1">. For example, in Figure 2(b), the 20 gray cells (except </span><span class="c9">c</span><span class="c1">) are the neighbor cells of </span><span class="c9">c</span><span class="c1">, denoted as </span><span class="c9">NC</span><span class="c2">(</span><span class="c9">c</span><span class="c2">)</span><span class="c1">. We can trivially show that for any place </span><span class="c9">p </span><span class="c1">inside </span><span class="c9">c</span><span class="c1">, the content of </span><span class="c9">p</span><span class="c1">&rsquo;s geo- social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhood is contained in </span><span class="c9">NC</span><span class="c2">(</span><span class="c9">c</span><span class="c2">) </span><span class="c1">and </span><span class="c9">c </span><span class="c1">itself. </span><span class="c2">Cluster Discovery. </span><span class="c1">Algorithm 3 is a pseudocode for DCPGS-G. It includes three phases. First, the algorithm maps all places into grid cells (line 1). Second, it obtains the geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhoods of all places (lines 2-6). The third phase discovers all geo-social clusters in the GeoSN (line 7). The geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhoods of places are computed at the grid cell level. Specifically, for each nonempty and </span><span class="c16">unprocessed </span><span class="c1">cell </span><span class="c9">c</span><span class="c1">, function </span><span class="c51">GET</span><span class="c1">N</span><span class="c51">EIGH</span><span class="c1">C</span><span class="c51">ELLS </span><span class="c1">re- trieves its neighbor cells </span><span class="c9">NC</span><span class="c2">(</span><span class="c9">c</span><span class="c2">) </span><span class="c1">(</span><span class="c51">GET</span><span class="c1">N</span><span class="c51">EIGH</span><span class="c1">C</span><span class="c51">ELLS </span><span class="c1">is trivial and thus details are omitted). A cell is &lsquo;unprocessed&rsquo; if its neighbor cells have not been retrieved before. Function </span><span class="c51">COMP</span><span class="c1">C</span><span class="c51">ELL</span><span class="c1">P</span><span class="c51">AIR </span><span class="c1">(Algorithm 4) first filters out the pairs of places </span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">) </span><span class="c1">with spa- tial distance greater than </span><span class="c9">maxD</span><span class="c1">, where </span><span class="c9">p</span><span class="c6">i </span><span class="c11">&isin; </span><span class="c23">c, p</span><span class="c6">j </span><span class="c11">&isin; </span><span class="c23">NC</span><span class="c11">(</span><span class="c23">c</span><span class="c11">) </span><span class="c0">and </span><span class="c9">p</span><span class="c3">i </span><span class="c2">&ne; </span><span class="c9">p</span><span class="c3">j</span><span class="c1">. This step is not needed if </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j </span><span class="c1">are in the same cell (in this case, the spatial distance between </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j </span><span class="c0">is certainly at most </span><span class="c9">maxD</span><span class="c1">). Next, the pairs of places </span><span class="c2">(</span><span class="c9">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c0">that satisfy the social </span><span class="c1">distance constraint </span><span class="c9">&tau; </span><span class="c1">and the geo-social distance threshold </span><span class="c9">&epsilon; </span><span class="c1">are se- lected. If </span><span class="c9">p</span><span class="c6">i </span><span class="c0">and </span><span class="c23">p</span><span class="c6">j </span><span class="c0">are in each others&rsquo; geo-social </span><span class="c23">&epsilon;</span><span class="c0">-neighborhood, </span><span class="c1">their corresponding </span><span class="c9">N</span><span class="c3">&epsilon;</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c2">) </span><span class="c1">and </span><span class="c9">N</span><span class="c3">&epsilon;</span><span class="c2">(</span><span class="c9">p</span><span class="c3">j</span><span class="c2">) </span><span class="c1">are updated. After all cells have been processed, meaning that the geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhoods of all places in the GeoSN are acquired, function </span><span class="c51">GET</span><span class="c1">C</span><span class="c51">LUSTERS </span><span class="c1">is called to discover geo-social clusters following the framework of DCPGS-R (Algorithm 1), except that the </span><span class="c9">N</span><span class="c6">&epsilon;</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c11">) </span><span class="c0">of each place </span><span class="c9">p</span><span class="c3">i </span><span class="c1">has already been computed. Note that an </span><span class="c16">unprocessed </span><span class="c1">place </span><span class="c9">p</span><span class="c3">i </span><span class="c1">in function </span><span class="c51">GET</span><span class="c1">C</span><span class="c51">LUSTERS </span><span class="c1">means that the size of </span><span class="c9">p</span><span class="c6">i</span><span class="c0">&rsquo;s geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhood, </span><span class="c2">&#8739;</span><span class="c9">N</span><span class="c6">&epsilon;</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c11">)&#8739;</span><span class="c0">, has not been checked. </span></p><p class="c134"><span class="c2">Algorithm 3 </span><span class="c1">DCPGS-G(GeoSN, </span><span class="c9">&epsilon;,&tau;,maxD,MinPts,&omega;</span><span class="c1">) 1: </span><span class="c7">Map all places into grid cells </span><span class="c0">2: </span><span class="c21">for each </span><span class="c8">nonempty </span><span class="c21">&amp;&amp; </span><span class="c8">unprocessed </span><span class="c22">cell </span><span class="c8">c </span><span class="c21">do </span><span class="c0">3: </span><span class="c56">COMP</span><span class="c22">C</span><span class="c56">ELL</span><span class="c22">P</span><span class="c56">AIR</span><span class="c21">(</span><span class="c8">c, c, &epsilon;, &tau;,maxD,&omega;</span><span class="c21">) </span><span class="c0">4: </span><span class="c8">NC</span><span class="c21">(</span><span class="c8">c</span><span class="c21">)</span><span class="c22">=</span><span class="c56">GET</span><span class="c22">N</span><span class="c56">EIGH</span><span class="c22">C</span><span class="c56">ELLS</span><span class="c21">(</span><span class="c8">c</span><span class="c21">) </span><span class="c0">5: </span><span class="c21">for each </span><span class="c8">nonempty </span><span class="c21">&amp;&amp; </span><span class="c8">unprocessed </span><span class="c22">cell </span><span class="c8">c</span><span class="c15">&prime; </span><span class="c21">&isin; </span><span class="c8">NC</span><span class="c21">(</span><span class="c8">c</span><span class="c21">) do </span><span class="c0">6: </span><span class="c56">COMP</span><span class="c22">C</span><span class="c56">ELL</span><span class="c22">P</span><span class="c56">AIR</span><span class="c21">(</span><span class="c8">c, c</span><span class="c15">&prime;</span><span class="c8">,&epsilon;,&tau;,maxD,&omega;</span><span class="c21">) </span><span class="c1">7: </span><span class="c120">GET</span><span class="c7">C</span><span class="c120">LUSTERS</span><span class="c7">(</span><span class="c12">N</span><span class="c3">&epsilon;</span><span class="c7">, </span><span class="c12">MinPts</span><span class="c7">) </span></p><p class="c115 c140"><span class="c2">Complexity. </span><span class="c1">With the help of grid partitioning, the geo-social </span><span class="c9">&epsilon;</span><span class="c1">- neighborhood of all places in cell </span><span class="c9">c </span><span class="c1">can be obtained by checking all </span><span class="c9">c</span><span class="c1">&rsquo;s neighbor cells; the whole process can be completed within a single pass of the data. Thus, the complexity of DCPGS-G is </span><span class="c9">O</span><span class="c2">(</span><span class="c9">n</span><span class="c2">)</span><span class="c1">, as each of its three phases makes one pass over the data. However, algorithm DCPGS-R computes the geo-social </span><span class="c9">&epsilon;</span><span class="c1">-neighborhoods of each place one by one. Hence its cost is </span><span class="c9">O</span><span class="c2">(</span><span class="c9">n</span><span class="c2">log </span><span class="c9">n</span><span class="c2">)</span><span class="c1">, given that the expected cost of a single range query on the R-tree is </span><span class="c9">O</span><span class="c2">(log</span><span class="c9">n</span><span class="c2">)</span><span class="c1">. </span></p><p class="c157"><span class="c2">Algorithm 4 </span><span class="c51">COMP</span><span class="c1">C</span><span class="c51">ELL</span><span class="c1">P</span><span class="c51">AIR</span><span class="c1">(cell </span><span class="c9">c</span><span class="c1">, cell </span><span class="c9">c</span><span class="c14">&prime;</span><span class="c1">,</span><span class="c9">&epsilon;,&tau;,maxD,&omega;</span><span class="c1">) 1: </span><span class="c31">for each </span><span class="c7">pair </span><span class="c31">(</span><span class="c12">p</span><span class="c6">i</span><span class="c8">,p</span><span class="c6">j</span><span class="c21">) </span><span class="c22">where </span><span class="c8">p</span><span class="c6">i </span><span class="c21">&isin; </span><span class="c8">c, p</span><span class="c6">j </span><span class="c21">&isin; </span><span class="c8">c</span><span class="c15">&prime;</span><span class="c8">,p</span><span class="c6">i </span><span class="c21">&ne; </span><span class="c8">p</span><span class="c6">j </span><span class="c21">do </span><span class="c0">2: </span><span class="c21">if </span><span class="c8">c </span><span class="c21">= </span><span class="c8">c</span><span class="c15">&prime; </span><span class="c22">|| </span><span class="c8">E</span><span class="c21">(</span><span class="c8">p</span><span class="c6">i</span><span class="c12">,p</span><span class="c6">j</span><span class="c31">) &le; </span><span class="c12">maxD </span><span class="c31">then </span><span class="c0">3: </span><span class="c22">Compute </span><span class="c8">D</span><span class="c6">P </span><span class="c31">(</span><span class="c12">p</span><span class="c6">i</span><span class="c8">,p</span><span class="c6">j</span><span class="c21">) </span><span class="c0">4: </span><span class="c21">if </span><span class="c8">&omega; </span><span class="c21">&sdot; </span><span class="c8">D</span><span class="c6">P </span><span class="c31">(</span><span class="c12">p</span><span class="c6">i</span><span class="c8">,p</span><span class="c6">j</span><span class="c21">) &le; </span><span class="c8">&epsilon; </span><span class="c21">then </span><span class="c0">5: </span><span class="c22">Compute </span><span class="c8">D</span><span class="c6">S</span><span class="c31">(</span><span class="c12">p</span><span class="c6">i</span><span class="c12">,p</span><span class="c6">j</span><span class="c31">) </span><span class="c7">and </span><span class="c12">D</span><span class="c6">gs</span><span class="c21">(</span><span class="c8">p</span><span class="c6">i</span><span class="c12">,p</span><span class="c6">j</span><span class="c31">) </span><span class="c0">6: </span><span class="c21">if </span><span class="c8">D</span><span class="c6">S</span><span class="c31">(</span><span class="c12">p</span><span class="c6">i</span><span class="c8">,p</span><span class="c6">j</span><span class="c21">) &le; </span><span class="c8">&tau; </span><span class="c22">&amp;&amp; </span><span class="c8">D</span><span class="c6">gs</span><span class="c21">(</span><span class="c8">p</span><span class="c6">i</span><span class="c8">,p</span><span class="c6">j</span><span class="c21">) &le; </span><span class="c8">&epsilon; </span><span class="c21">then </span><span class="c0">7: </span><span class="c8">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">i</span><span class="c31">)</span><span class="c12">.insert</span><span class="c31">(</span><span class="c12">p</span><span class="c6">j</span><span class="c31">) </span><span class="c0">8: </span><span class="c8">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">j</span><span class="c31">)</span><span class="c12">.insert</span><span class="c31">(</span><span class="c12">p</span><span class="c6">i</span><span class="c31">) </span></p><p class="c110"><span class="c35">4. QUALITATIVE ANALYSIS </span><span class="c1">This section analyzes the quality of the geo-social clusters dis- covered by our proposed DCPGS framework. First, we compare </span></p><p class="c10 c70"><span class="c2">Algorithm 5 </span><span class="c51">GET</span><span class="c1">C</span><span class="c51">LUSTERS</span><span class="c1">(</span><span class="c9">N</span><span class="c6">&epsilon;</span><span class="c0">, </span><span class="c23">MinPts</span><span class="c0">) </span><span class="c1">1: </span><span class="c12">cid </span><span class="c31">= 1 </span><span class="c0">2: </span><span class="c8">Q </span><span class="c21">= </span><span class="c8">empty </span><span class="c0">3: </span><span class="c21">for each </span><span class="c40">unprocessed </span><span class="c22">place </span><span class="c8">p</span><span class="c6">i </span><span class="c7">in GeoSN </span><span class="c31">do </span><span class="c0">4: </span><span class="c21">if &#8739;</span><span class="c8">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">i</span><span class="c21">)&#8739; &ge; </span><span class="c8">MinPts </span><span class="c21">then </span><span class="c0">5: </span><span class="c22">assign </span><span class="c8">cid </span><span class="c22">to </span><span class="c8">p</span><span class="c6">i </span><span class="c0">6: </span><span class="c21">for each </span><span class="c22">place </span><span class="c8">p</span><span class="c6">j </span><span class="c31">&isin; </span><span class="c12">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">i</span><span class="c31">) do </span><span class="c0">7: </span><span class="c22">assign </span><span class="c8">cid </span><span class="c22">to </span><span class="c8">p</span><span class="c6">j </span><span class="c0">8: </span><span class="c21">if </span><span class="c8">p</span><span class="c6">j </span><span class="c22">is </span><span class="c40">unprocessed </span><span class="c21">then </span><span class="c0">9: </span><span class="c8">Q.push</span><span class="c21">(</span><span class="c8">p</span><span class="c6">j</span><span class="c31">) </span><span class="c1">10: </span><span class="c31">while !</span><span class="c12">Q.isEmpty</span><span class="c31">() do </span><span class="c0">11: </span><span class="c8">p</span><span class="c6">k </span><span class="c7">= </span><span class="c12">Q.pop</span><span class="c7">() </span><span class="c0">12: </span><span class="c21">if </span><span class="c8">p</span><span class="c6">k </span><span class="c7">is </span><span class="c26">unprocessed </span><span class="c31">then </span><span class="c0">13: </span><span class="c21">if &#8739;</span><span class="c8">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">k</span><span class="c31">)&#8739; &ge; </span><span class="c12">MinPts </span><span class="c31">then </span><span class="c0">14: </span><span class="c21">for each </span><span class="c22">place </span><span class="c8">p</span><span class="c6">m </span><span class="c21">&isin; </span><span class="c8">N</span><span class="c6">&epsilon;</span><span class="c21">(</span><span class="c8">p</span><span class="c6">k</span><span class="c31">) do </span><span class="c0">15: </span><span class="c22">assign </span><span class="c8">cid </span><span class="c22">to </span><span class="c8">p</span><span class="c6">m </span><span class="c0">16: </span><span class="c21">if </span><span class="c8">p</span><span class="c6">m </span><span class="c22">is </span><span class="c40">unprocessed </span><span class="c21">then </span><span class="c0">17: </span><span class="c8">Q.push</span><span class="c21">(</span><span class="c8">p</span><span class="c6">m</span><span class="c21">) </span><span class="c1">18: </span><span class="c12">cid </span><span class="c31">= </span><span class="c12">cid </span><span class="c31">+ 1 </span></p><p class="c117 c184"><span class="c1">DCPGS with the graph clustering approaches discussed in Sec- tion 2.1.1, in order to demonstrate the suitability of the density- based clustering model for this application. Second, we compare with two extreme versions of DCPGS: PureSocialDistance applies density-based clustering by using the social distance </span><span class="c9">D</span><span class="c6">S</span><span class="c11">(</span><span class="c23">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) </span><span class="c1">only, while DBSCAN uses only the Euclidean distance </span><span class="c9">E</span><span class="c2">(</span><span class="c9">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c3">j</span><span class="c2">)</span><span class="c1">. This comparison shows the appropriateness of using both social and spatial distances in clustering. In the implementation of Pure- SocialDistance, we do not put place pairs with spatial distance more than </span><span class="c2">1000</span><span class="c9">m </span><span class="c1">in the same cluster; otherwise this method be- comes too expensive. Finally, we assess the suitability of our social distance measure (Section 2.2) by evaluating versions of DCPGS, which use the alternative social distance definitions discussed in Section 2.2.1. All tested methods were implemented in C++ and the experiments were performed on a 3.4 GHz quad-core machine running Ubuntu 12.04 with 16 GBytes memory. </span><span class="c2">Data. </span><span class="c1">We use two publicly available datasets</span><span class="c17">6 </span><span class="c1">from historical geo-social networks. Gowalla contains a social network with </span><span class="c2">&#8739;</span><span class="c9">U</span><span class="c2">&#8739; =</span><span class="c1">196,591 users and </span><span class="c2">&#8739;</span><span class="c9">E</span><span class="c2">&#8739; =</span><span class="c1">950,327 undirected friendship edges. There are </span><span class="c2">&#8739;</span><span class="c9">CK</span><span class="c2">&#8739; =</span><span class="c1">6,442,892 checkins performed by those users on </span><span class="c2">&#8739;</span><span class="c9">P</span><span class="c2">&#8739; =</span><span class="c1">1,280,969 places over a period from Feb. 2009 to Oct. 2010. Brightkite includes a social network of </span><span class="c2">&#8739;</span><span class="c9">U</span><span class="c2">&#8739; =</span><span class="c1">58,228 users and </span><span class="c2">&#8739;</span><span class="c9">E</span><span class="c2">&#8739; =</span><span class="c1">214,078 undirected friendship edges. It contains </span><span class="c2">&#8739;</span><span class="c9">CK</span><span class="c2">&#8739; =</span><span class="c1">4,491,143 checkins on </span><span class="c2">&#8739;</span><span class="c9">P</span><span class="c2">&#8739; =</span><span class="c1">772,783 distinct places col- lected over the period from Apr. 2008 to Oct. 2010. </span><span class="c2">Default Parameter Settings. </span><span class="c1">The density requirement of the clus- tering is determined by parameters </span><span class="c9">MinPts </span><span class="c1">and </span><span class="c9">&epsilon; </span><span class="c1">(or DBSCAN&rsquo;s </span><span class="c9">eps</span><span class="c1">). We set </span><span class="c9">MinPts </span><span class="c2">= 5 </span><span class="c1">for all approaches; various density set- tings can be achieved by just tuning </span><span class="c9">&epsilon; </span><span class="c1">(or DBSCAN&rsquo;s </span><span class="c9">eps</span><span class="c1">). For instance, a large </span><span class="c9">MinPts </span><span class="c1">has similar effect as a small </span><span class="c9">&epsilon; </span><span class="c1">(or DB- SCAN&rsquo;s </span><span class="c9">eps</span><span class="c1">). By default, parameter </span><span class="c9">&omega; </span><span class="c1">in the geo-social distance is set to 0.5 to equally weigh the social and spatial distances. By default, parameter </span><span class="c9">&tau; </span><span class="c1">is set to 0.7, and </span><span class="c9">maxD </span><span class="c1">is set to </span><span class="c2">100</span><span class="c9">m </span><span class="c1">for dataset Gowalla and </span><span class="c2">120</span><span class="c9">m </span><span class="c1">for dataset Brightkite. </span></p><p class="c117 c204"><span class="c35">4.1 Visualization-based Analysis </span><span class="c1">We first visualize and compare the clusters found by DCPGS and alternative approaches in the area of Manhattan, on the Gowalla dataset. Figures 3(a)-(c) show the clusters by DCPGS, DBSCAN (which disregards the social network behind the places) and Pure- SocialDistance (which disregards the spatial information). DCPGS finds geo-social clusters with the following features. </span></p><p class="c171"><span class="c44">6</span><span class="c0">downloaded from snap.stanford.edu/data/index.html </span></p><p class="c88"><span class="c46">104 </span></p><p class="c10"><span class="c94">B </span></p><p class="c10"><span class="c1">(f) SimRank: </span><span class="c9">&epsilon; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">3</span><span class="c1">, </span><span class="c9">&tau; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">7</span><span class="c1">, </span><span class="c23">maxD </span><span class="c11">= 100</span><span class="c23">m </span><span class="c2">Figure 3: Place clusters of Gowalla found in Manhattan </span></p><p class="c10"><span class="c2">Geo-Social Splitting/Merging Criteria. </span><span class="c1">Geo-social clusters that are very close to each other are split correctly by DCPGS, while DBSCAN may consider them as a single cluster due to their spatial closeness; in other cases, clusters split by DBSCAN due to rel- atively low spatial density between them are merged by DCPGS because of their strong social ties. For example, consider region A in Figures 3(a) and the corresponding region A</span><span class="c14">&prime; </span><span class="c1">in Figure 3(b), where DCPGS and DBSCAN detect clusters with totally different layouts. By tuning the parameters of DBSCAN, we are not able to find the clusters found by DCPGS, because the densities of the two clusters in region A are similar and the two clusters are close to each other. Thus, DBSCAN can only consider the places in re- gion A</span><span class="c14">&prime; </span><span class="c1">as either a single cluster or as several fragmented clusters (Figure 3(b)), under different parameter settings. In certain cases, spatially dense clusters may be split by DCPGS because of some natural barriers, such as rivers, and walls. These barriers make it inconvenient to travel from one side to the other, resulting in a split- ting effect. As an example, in Figure 4, a cluster (region D) found by DBSCAN is split into two DCPGS clusters (regions D</span><span class="c39">1 </span><span class="c1">and D</span><span class="c39">2</span><span class="c1">) by the river, since the users on different river sides are proved to have weak social connection. While it is possible for DBSCAN to find the two DCPGS clusters by reducing the value of </span><span class="c9">eps</span><span class="c1">, its pa- rameter settings in this case make some existing clusters disappear, resulting in too many outliers. </span><span class="c2">Spatially Loose Clusters. </span><span class="c1">Some geo-social clusters detected by DCPGS in region B of Figure 3(a) are considered as outliers by DBSCAN in the corresponding region B</span><span class="c14">&prime; </span><span class="c1">of Figure 3(b). Region B</span><span class="c14">&prime; </span><span class="c1">is spatially too sparse to satisfy the density requirement of DB- SCAN, and thus most places inside it are filtered out as outliers. However, the users who checked in those places have strong social relationships. Hence, geo-social clusters are discovered in region B by DCPGS in Figure 3(a). While it is possible for DBSCAN to discover such spatially loose clusters by reducing the density pa- </span></p><p class="c10"><span class="c1">rameters, this would result in merging too many clusters together, making denser clusters indistinguishable. </span><span class="c2">Fuzzy Boundary Clusters. </span><span class="c1">Some DCPGS geo-social clusters have fuzzy boundaries with each other, which is reasonable in the real world, since groups of socially connected users may spatially over- lap. On the other hand, DBSCAN produces clusters with strict boundaries. For instance, in Figure 3(a), there is no strict bound- ary between the two clusters enclosed in region C. Although Pure- SocialDistance, which is the other extreme method, also produces clusters with fuzzy boundaries (see Figure 3(c)), the clusters are spatially indistinguishable and they are not interesting, i.e., for the applications mentioned in the Introduction. </span></p><p class="c10"><span class="c148">B </span></p><p class="c10"><span class="c148">A </span></p><p class="c10"><span class="c200">C </span></p><p class="c10"><span class="c1">(a) DCPGS: </span><span class="c9">&epsilon; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">4</span><span class="c1">, </span><span class="c9">&tau; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">7</span><span class="c1">, </span><span class="c23">maxD </span><span class="c11">= 100</span><span class="c23">m </span></p><p class="c10"><span class="c1">(d) LinkClustering: </span><span class="c9">&tau; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">7</span><span class="c1">, </span><span class="c23">maxD </span><span class="c11">= 100</span><span class="c23">m </span></p><p class="c10"><span class="c94">B </span></p><p class="c10"><span class="c1">(e) Jaccard: </span><span class="c9">&epsilon; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">4</span><span class="c1">, </span><span class="c9">&tau; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">7</span><span class="c1">, </span><span class="c23">maxD </span><span class="c11">= 100</span><span class="c23">m </span></p><p class="c10"><span class="c112">B</span><span class="c105">&prime; </span></p><p class="c10"><span class="c112">A</span><span class="c105">&prime; </span></p><p class="c10"><span class="c1">(b) DBSCAN: </span><span class="c9">eps </span><span class="c2">= 40</span><span class="c9">m </span></p><p class="c10"><span class="c94">A </span></p><p class="c10"><span class="c95">C </span></p><p class="c10"><span class="c32">D</span><span class="c69">1 </span></p><p class="c10"><span class="c1">(b) DCPGS: </span><span class="c9">&epsilon; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">4 </span><span class="c1">s.t. </span><span class="c9">&tau; </span><span class="c2">= </span><span class="c11">0</span><span class="c23">.</span><span class="c11">7</span><span class="c0">, </span><span class="c23">maxD </span><span class="c11">= 120</span><span class="c23">m </span></p><p class="c10"><span class="c2">Figure 4: Clusters of Brightkite found by DBSCAN and DCPGS in Chicago </span></p><p class="c53"><span class="c1">We also visually analyzed the results of the alternative graph- based clustering models LinkClustering and Metis, described in Section 2.1.1. These two approaches produce similar results; in- dicatively, we show the clusters produced by LinkClustering in Fig- ure 3(d). LinkClustering produces thousands of small clusters (av- erage size around 3), which are typically not well-separated spa- </span></p><p class="c10"><span class="c46">105 </span></p><p class="c10"><span class="c32">D </span></p><p class="c10"><span class="c1">(a) DBSCAN: </span><span class="c9">eps </span><span class="c2">= 60</span><span class="c9">m </span></p><p class="c10"><span class="c1">(c) PureSocialDistance: </span><span class="c9">&epsilon; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">2</span><span class="c1">, </span><span class="c23">&tau; </span><span class="c11">= 1</span><span class="c0">, </span><span class="c23">maxD </span><span class="c11">= 1000</span><span class="c23">m </span></p><p class="c10"><span class="c94">A </span></p><p class="c10"><span class="c95">C </span></p><p class="c10"><span class="c32">D</span><span class="c69">2 </span></p><p class="c53"><span class="c1">tially. Due to the sparsity of geo-social network data, the con- structed place network contains many connected components that are disconnected with each other (e.g., the place network built when </span><span class="c9">&tau; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">7</span><span class="c1">, </span><span class="c9">maxD </span><span class="c2">= 100</span><span class="c1">, and </span><span class="c9">&omega; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">5 </span><span class="c1">contains 34,496 connected components with 4.3 nodes and 8.2 edges on average. The clusters found by Metis are fewer and larger, but also spatially indistin- guishable. Metis ignores outliers; as a result, places belong to the same cluster may have low spatial proximity and social similarity. </span></p><p class="c75"><span class="c1">Finally, we analyzed the results of DCPGS, if our </span><span class="c9">D</span><span class="c6">S </span><span class="c0">definition </span><span class="c1">(Definition 2) is replaced by the alternatives described in Section 2.2.1. measures For become </span><span class="c9">D</span><span class="c3">S </span><span class="c33">Katz </span><span class="c19">and </span><span class="c1">extremely </span><span class="c48">D</span><span class="c3">S </span><span class="c33">ct</span><span class="c19">, we </span><span class="c1">expensive. </span><span class="c19">set </span><span class="c48">L </span><span class="c30">= </span><span class="c9">D</span><span class="c1">Figure </span><span class="c3">S </span><span class="c33">Katz </span><span class="c19">, </span><span class="c1">3(e) </span><span class="c19">and </span><span class="c48">D</span><span class="c1">shows </span><span class="c3">S </span><span class="c33">ct</span><span class="c19">produce similar results </span><span class="c1">the clusters found instead of </span><span class="c9">D</span><span class="c3">S</span><span class="c1">. All these measures produce </span><span class="c30">3</span><span class="c19">; for bigger </span><span class="c48">L </span><span class="c19">values, these </span><span class="c1">We observed that </span><span class="c19">to each other. Indicatively, </span><span class="c9">D</span><span class="c3">S </span><span class="c33">Jac </span><span class="c19">, </span></p><p class="c75"><span class="c1">by DCPGS small clusters if </span><span class="c9">D</span><span class="c3">S </span><span class="c33">Jac </span><span class="c1">and </span><span class="c19">is used </span><span class="c1">too many outliers since they give large distance values for most pairs of places </span><span class="c9">p</span><span class="c3">i </span><span class="c1">and </span><span class="c9">p</span><span class="c3">j</span><span class="c1">. The set of common users for two places in Jac- card of Katz (i.e., dampens </span><span class="c9">U</span><span class="c6">p</span><span class="c18">i </span><span class="c9">U</span><span class="c6">p</span><span class="c18">j</span><span class="c1">. The expected high due to the </span><span class="c0">produces clusters </span><span class="c1">served that the low values, meaning </span><span class="c2">&cap; </span><span class="c9">U</span><span class="c1">the </span><span class="c6">p</span><span class="c18">j</span><span class="c1">) effect is expected of CommuteTime to be small and the decay factor long distance connections between between places </span><span class="c9">U</span><span class="c3">p</span><span class="c1">is </span><span class="c18">i </span><span class="c1">also and </span></p><p class="c75"><span class="c1">probability effect </span><span class="c0">of slightly </span><span class="c1">that of normalization. many distribution </span><span class="c0">larger </span><span class="c1">pairs </span><span class="c0">sizes </span><span class="c1">of of </span><span class="c0">compared </span><span class="c1">places On </span><span class="c9">D</span><span class="c3">S </span><span class="c33">sim</span><span class="c1">the </span><span class="c19">is </span><span class="c1">have other </span><span class="c19">skewed </span><span class="c0">to </span><span class="c1">low </span><span class="c23">D</span><span class="c6">S</span><span class="c0">. </span><span class="c1">hand, bipartite </span><span class="c19">towards </span><span class="c0">We </span><span class="c9">D</span><span class="c3">S </span><span class="c33">sim</span><span class="c0">ob- </span></p><p class="c53"><span class="c1">minimax SimRank social distance, because SimRank is based on the most similar pair of visiting users. The clustering results of SimRank (Figure 3(f)) and DCPGS are visually similar; it is hard to tell which results are better based on visualization. </span></p><p class="c10"><span class="c35">4.2 Social Quality Evaluation </span><span class="c1">In this section, we design and use two measures for assessing the social coherence between places in the discovered clusters. Based on these measures, we assess the quality of DCPGS and the alter- native approaches for clustering GeoSN places. </span></p><p class="c10"><span class="c87">4.2.1 Social Entropy based Evaluation </span><span class="c1">The first measure, called social entropy, measures the social quality of the clusters based on the network communities that the GeoSN users form. Given a social network </span><span class="c9">G </span><span class="c2">= (</span><span class="c9">U, E</span><span class="c2">)</span><span class="c1">, we first partition all the users in </span><span class="c9">U </span><span class="c1">into several disjoint network communities. Let </span><span class="c9">PC </span><span class="c1">be a cluster of GeoSN places. According to the detected net- work communities, the visiting users of </span><span class="c9">PC</span><span class="c1">, i.e., </span><span class="c2">&cup;</span><span class="c6">p</span><span class="c45">&isin;</span><span class="c6">PC</span><span class="c23">U</span><span class="c6">p</span><span class="c0">, can </span><span class="c1">be divided into several disjoint sets in </span><span class="c9">C</span><span class="c3">PC </span><span class="c2">= {</span><span class="c9">C</span><span class="c39">1</span><span class="c9">,C</span><span class="c39">2</span><span class="c9">,...,C</span><span class="c3">m</span><span class="c2">}</span><span class="c1">, such that each set </span><span class="c9">C</span><span class="c6">i </span><span class="c0">is a subset of users in </span><span class="c23">C</span><span class="c6">PC </span><span class="c0">belonging to the </span><span class="c1">same network community. We call </span><span class="c9">C</span><span class="c6">PC </span><span class="c0">the community set of </span><span class="c23">PC</span><span class="c0">. </span></p><p class="c53"><span class="c16">Definition 3. </span><span class="c1">(Social Entropy) Given a cluster </span><span class="c9">PC</span><span class="c1">, let </span><span class="c9">U</span><span class="c6">PC </span><span class="c0">be </span><span class="c1">the set of users who visit the places in </span><span class="c9">PC</span><span class="c1">, i.e., </span><span class="c9">U</span><span class="c3">PC </span><span class="c2">= &cup;</span><span class="c3">p</span><span class="c15">&isin;</span><span class="c3">PC</span><span class="c9">U</span><span class="c3">p</span><span class="c1">. The social entropy of </span><span class="c9">PC </span><span class="c1">is then defined as: </span></p><p class="c10"><span class="c2">E = &sum; </span></p><p class="c10"><span class="c3">C</span><span class="c18">i</span><span class="c15">&isin;</span><span class="c3">C</span><span class="c18">PC </span></p><p class="c10"><span class="c2">&minus; &#8739;</span><span class="c9">U</span><span class="c30">&#8739;</span><span class="c48">C</span><span class="c6">PC</span><span class="c11">&#8739; </span><span class="c3">i</span><span class="c2">&#8739; </span></p><p class="c10"><span class="c2">log &#8739;</span><span class="c9">U</span><span class="c30">&#8739;</span><span class="c48">C</span><span class="c6">PC</span><span class="c11">&#8739; </span></p><p class="c10"><span class="c3">i</span><span class="c2">&#8739; </span></p><p class="c53"><span class="c1">The social entropy, analogous to the entropy used in decision tree induction, measures the impurity of a cluster </span><span class="c9">PC </span><span class="c1">with respect to the participation of its users into different communities. A low social entropy means that the great majority of the visitors of </span><span class="c9">PC </span><span class="c1">come from the same community (i.e., low impurity), indicating that the places in </span><span class="c9">PC </span><span class="c1">have tighter social relationships between each other, which is favored. </span></p><p class="c10"><span class="c1">We applied the METIS community detection algorithm [16] to divide the set of users in the GeoSN into </span><span class="c9">k </span><span class="c1">non-overlapping com- </span></p><p class="c53"><span class="c1">munities</span><span class="c17">7</span><span class="c1">, providing a baseline for social entropy evaluation. To avoid a comparison that is biased to parameter </span><span class="c9">k</span><span class="c1">, we evaluate the social entropy of clustering results obtained by DCPGS and the competitors for two different values of </span><span class="c9">k</span><span class="c1">. One value of </span><span class="c9">k </span><span class="c1">is cho- sen based on the following </span><span class="c16">rule of the thumb </span><span class="c1">[19], i.e., </span><span class="c9">k </span><span class="c2">= </span><span class="c30">&radic;</span><span class="c9">N</span><span class="c2">/2 </span><span class="c1">where </span><span class="c9">N </span><span class="c1">is the number of users in the social network. The other value of </span><span class="c9">k </span><span class="c1">is decided by Dunbar&rsquo;s number that suggests humans can only comfortably maintain 150 stable relationships and the mean community size is around 150. For dataset Gowalla, these values are </span><span class="c9">k </span><span class="c2">= 313 </span><span class="c1">and </span><span class="c9">k </span><span class="c2">= 1310</span><span class="c1">, respectively. </span></p><p class="c53"><span class="c1">Figures 5(a) and 5(b) show the average social entropy for DCPGS, versions of DCPGS with alternative </span><span class="c9">D</span><span class="c6">S </span><span class="c0">(SimRank, Com- </span><span class="c1">muteTime, Katz, and Jaccard) and PureSocialDistance when vary- ing </span><span class="c9">&epsilon;</span><span class="c1">. CommuteTime, and Katz have the lowest social entropy; however, these methods produce small clusters and have too many outliers as explained in Section 4.1. Within each small cluster, the places are only visited by few people and this explains the low en- tropy. Jaccard also has low social entropy for the same reason. PureSocialDistance has low social entropy in most cases; this indi- cates that our proposed social distance between places is effective in putting places with close social relationships together. When </span><span class="c9">&epsilon; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">1</span><span class="c1">, the social entropies of DCPGS and PureSocialDistance are similar, both good, since only those places with very close social distances are clustered. When </span><span class="c9">&epsilon; </span><span class="c2">= 1</span><span class="c1">, PureSocialDistance has no so- cial distance constraint </span><span class="c9">&tau; </span><span class="c1">thus its entropy becomes higher than that of DCPGS. DCPGS outperforms SimRank-based DCPGS, mean- ing that our proposed social distance is better than the SimRank- based </span><span class="c9">D</span><span class="c33">sim </span><span class="c3">S </span><span class="c30">(</span><span class="c48">p</span><span class="c33">i</span><span class="c48">,p</span><span class="c33">j</span><span class="c30">) </span><span class="c19">distance. When </span><span class="c48">k </span><span class="c30">= 1310</span><span class="c19">, the average social </span><span class="c1">entropy of all the methods is larger than in the case where </span><span class="c9">k </span><span class="c2">= 313</span><span class="c1">, since a larger number of network communities increases the prob- ability that users in a single cluster belong to diverse communities. The average cluster size increases with </span><span class="c9">&epsilon;</span><span class="c1">, increasing the probability that the visitors of a cluster belong to different communities; thus, the average social entropy increases. In addition, the clustering result becomes stable at large values of </span><span class="c9">&epsilon;</span><span class="c1">, thus the social entropy converges. By visualization, we observed that </span><span class="c9">&epsilon; </span><span class="c1">should be set to a value smaller than </span><span class="c2">0</span><span class="c9">.</span><span class="c2">5 </span><span class="c1">for the clustering results to be interesting. </span></p><p class="c53"><span class="c1">Figures 5(c) and 5(d) show the average social entropies of DCPGS, DCPGS based on SimRank, CommuteTime, Katz, and Jaccard, and the graph-based clustering methods Metis and LinkClustering, when varying the social distance constraint </span><span class="c9">&tau;</span><span class="c1">. Similar to the case when </span><span class="c9">&epsilon; </span><span class="c1">varies, the social entropy increases and then stabilizes as </span><span class="c9">&tau; </span><span class="c1">increases, except for the entropy of Metis, which keeps increasing due to the network partitioning method- ology of Metis with the increase of </span><span class="c9">&tau;</span><span class="c1">, the constructed place net- work becomes less connected, however, due to its partitioning na- ture, Metis puts disconnected places in the constructed place net- work into same cluster. When </span><span class="c9">&tau; </span><span class="c1">is less than 0.5, the social entropy of CommuteTime is zero, since with these distance measures the places in each cluster are visited by only one person when </span><span class="c9">&tau; </span><span class="c2">&lt; 0</span><span class="c9">.</span><span class="c2">5</span><span class="c1">. Jaccard has low social entropy also due to the small sizes of its clus- ters. For </span><span class="c9">&tau; </span><span class="c2">&le; 0</span><span class="c9">.</span><span class="c2">1 </span><span class="c1">SimRank-based DCPGS fails to find any clusters, therefore the entropy is 0. After investigation, we found that there is no pair of places </span><span class="c9">p</span><span class="c6">i</span><span class="c0">, </span><span class="c23">p</span><span class="c6">j </span><span class="c0">with </span><span class="c23">D</span><span class="c3">sim</span><span class="c6">S </span><span class="c2">(</span><span class="c9">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">) &lt; 0</span><span class="c23">.</span><span class="c11">2 </span><span class="c0">because of the </span><span class="c1">decay factor </span><span class="c9">&phi;</span><span class="c1">. When </span><span class="c9">&tau; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">2</span><span class="c1">, SimRank has a low social entropy, since only few (987) clusters of small size are found compared to the 3605 clusters discovered by DCPGS. After the point where the two approaches find a similar number of clusters (e.g., at </span><span class="c9">&tau; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">5</span><span class="c1">, SimRank finds 5880 clusters, while DCPGS finds 6742 clusters), DCPGS has constantly lower entropy than SimRank. In addition, </span></p><p class="c10"><span class="c44">7</span><span class="c0">This is different from Metis used as a competitor of DCPGS in GeoSN place clustering (discussed in Section 2.1.1). </span></p><p class="c10"><span class="c46">106 </span></p><p class="c10"><span class="c31">&#9651; </span><span class="c7">DCPGS </span><span class="c31">&#9661; </span><span class="c7">DBSCAN </span><span class="c31">&#9660; </span><span class="c7">PureSocialDistance </span><span class="c31">&#9734; </span><span class="c7">Jaccard </span><span class="c31">&times; </span><span class="c7">SimRank </span><span class="c31">&#9723; </span><span class="c7">Katz </span></p><p class="c10"><span class="c31">&#9679; </span><span class="c7">CommuteTime </span><span class="c31">&#8718; </span><span class="c7">LinkClustering </span><span class="c31">&#9655; </span><span class="c7">Metis </span></p><p class="c10"><span class="c15">2.5 </span></p><p class="c10"><span class="c47">0 </span><span class="c15">0.1 0.2 0.3 </span><span class="c0">(a) </span><span class="c15">0.4 </span><span class="c23">k </span><span class="c15">0.5 </span><span class="c11">= </span><span class="c116">&isin; </span><span class="c11">313 </span></p><p class="c10"><span class="c15">0.6 0.7 0.8 0.9 1 </span><span class="c15">2.5 </span><span class="c47">2 </span></p><p class="c50"><span class="c15">1.5</span><span class="c0">(b) </span><span class="c23">k </span><span class="c11">= 1310 </span><span class="c116">&isin; </span><span class="c71">0 </span><span class="c25">0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 </span><span class="c14">2 </span><span class="c15">1.5</span><span class="c47">1 </span><span class="c14">1 </span></p><p class="c10"><span class="c15">0.5</span><span class="c15">0.5</span><span class="c14">0 </span><span class="c15">0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 </span><span class="c71">4 </span><span class="c25">3.5</span><span class="c0">(c) </span><span class="c23">k </span><span class="c11">= </span><span class="c165">&#1090; </span><span class="c11">313 </span></p><p class="c10"><span class="c79">4 </span></p><p class="c10"><span class="c71">3 </span><span class="c64">3.5</span><span class="c25">2.5</span><span class="c0">(d) </span><span class="c23">k </span><span class="c11">= </span><span class="c116">&#1090; </span><span class="c11">1310 </span></p><p class="c50"><span class="c14">0 </span><span class="c15">10 50 100 150 200 250 300 </span><span class="c79">3 </span><span class="c64">2.5</span><span class="c71">2 </span><span class="c79">2 </span><span class="c25">1.5</span><span class="c64">1.5</span><span class="c71">1 </span><span class="c79">1 </span><span class="c25">0.5</span><span class="c64">0.5</span><span class="c79">0 </span><span class="c64">0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 </span><span class="c15">3.5 </span></p><p class="c50"><span class="c14">y portnEl aico</span><span class="c15">S2.51.5</span><span class="c14">3 2 </span></p><p class="c10"><span class="c14">1 </span></p><p class="c75"><span class="c20">4 </span><span class="c55">3.5</span><span class="c20">y portnEl aico</span><span class="c55">S2.51.5</span><span class="c20">3 2 </span></p><p class="c10"><span class="c20">1 </span><span class="c15">0.5</span><span class="c55">0.5</span><span class="c93">eps </span><span class="c15">(DBSCAN) </span><span class="c0">(e) </span><span class="c23">k </span><span class="c11">= </span><span class="c15">or </span><span class="c11">313 </span></p><p class="c10"><span class="c93">maxD </span><span class="c15">(others) </span></p><p class="c10"><span class="c89">m </span><span class="c20">0 </span></p><p class="c10"><span class="c55">10 </span><span class="c67">eps </span><span class="c55">50 (DBSCAN) </span><span class="c0">(f) </span><span class="c55">100 </span><span class="c23">k </span><span class="c11">= </span><span class="c55">150 </span><span class="c11">1310 </span></p><p class="c10"><span class="c55">or 200 </span><span class="c67">maxD </span><span class="c55">250 (others) 300 </span><span class="c98">m </span><span class="c2">Figure 5: Social entropy evaluation in Gowalla </span></p><p class="c53"><span class="c1">DCPGS is less sensitive to </span><span class="c9">&tau; </span><span class="c1">compared to SimRank. DCPGS out- performs the two graph-based competitors Metis and LinkCluster- ing. As we observed by visualization, in practice </span><span class="c9">&tau; </span><span class="c1">should be set to a value higher than </span><span class="c2">0</span><span class="c9">.</span><span class="c2">5</span><span class="c1">, because a very tight social distance con- straint creates too few and too small geo-social clusters. </span></p><p class="c53"><span class="c1">Figures 5(e) and 5(f) show the average social entropies of the various versions of DCPGS and all the competitor approaches when varying the spatial distance constraint </span><span class="c9">maxD </span><span class="c1">(</span><span class="c9">eps </span><span class="c1">for DB- SCAN). DCPGS is superior to SimRank-based DCPGS, DBSCAN, LinkClustering and Metis for all values of </span><span class="c9">maxD </span><span class="c2">(</span><span class="c9">eps</span><span class="c2">)</span><span class="c1">. In gen- eral, the social entropies of all methods are not very sensitive to </span><span class="c9">maxD</span><span class="c1">. For Gowalla, a good value for </span><span class="c9">maxD </span><span class="c1">is around 100</span><span class="c9">m</span><span class="c1">; large </span><span class="c9">maxD </span><span class="c1">values result in clusters that are spatially too loose. </span></p><p class="c10"><span class="c87">4.2.2 Community Score based Evaluation </span><span class="c1">Given a GeoSN place cluster </span><span class="c9">PC</span><span class="c1">, let </span><span class="c9">U</span><span class="c6">PC </span><span class="c0">be the set of users </span><span class="c1">who visit the places in </span><span class="c9">PC</span><span class="c1">, i.e., </span><span class="c9">U</span><span class="c3">PC </span><span class="c2">= &cup;</span><span class="c3">p</span><span class="c15">&isin;</span><span class="c3">PC</span><span class="c9">U</span><span class="c3">p</span><span class="c1">. Assume each </span><span class="c9">U</span><span class="c6">PC </span><span class="c0">is a community in the GeoSN. We adopt the eight network </span><span class="c1">community multi-criterion scores surveyed in [18] to compute the community score of </span><span class="c9">U</span><span class="c6">PC </span><span class="c0">for each cluster </span><span class="c23">PC</span><span class="c0">. Figure 6 com- </span><span class="c1">pares the results of DCPGS and its alternatives on Gowalla (Katz is omitted because its result is quite similar to that of Commute- Time), in terms of the </span><span class="c16">internal density </span><span class="c1">and </span><span class="c16">conductance </span><span class="c1">scores. We group the clusters discovered by each method by size and com- pute and plot the average community score (i.e., internal density and conductance) for each cluster size group. The results based on the other six criteria of [18] are similar and we omit them </span></p><p class="c53"><span class="c1">due to lack of space. The internal density of </span><span class="c9">U</span><span class="c6">PC </span><span class="c0">is defined by </span><span class="c2">1 &minus; </span><span class="c9">m</span><span class="c6">U</span><span class="c18">PC </span><span class="c2">/(&#8739;</span><span class="c9">U</span><span class="c6">PC</span><span class="c11">&#8739;(&#8739;</span><span class="c23">U</span><span class="c6">PC</span><span class="c11">&#8739; &minus; 1)/2)</span><span class="c0">, where </span><span class="c23">m</span><span class="c6">U</span><span class="c18">PC </span><span class="c1">is the number of edges in </span><span class="c9">U</span><span class="c3">PC</span><span class="c1">, </span><span class="c9">m</span><span class="c6">U</span><span class="c18">PC </span><span class="c2">= &#8739;{(</span><span class="c9">u, v</span><span class="c2">)&#8739;</span><span class="c9">u </span><span class="c2">&isin; </span><span class="c9">U</span><span class="c6">PC</span><span class="c23">,v </span><span class="c11">&isin; </span><span class="c23">U</span><span class="c6">PC</span><span class="c11">}&#8739;</span><span class="c0">. Conduc- </span><span class="c1">tance is the fraction of edges from nodes of </span><span class="c9">U</span><span class="c6">PC </span><span class="c0">that point outside </span><span class="c9">U</span><span class="c3">PC</span><span class="c1">, i.e., </span><span class="c9">o</span><span class="c3">U</span><span class="c18">PC </span><span class="c2">/(2</span><span class="c9">m</span><span class="c3">U</span><span class="c18">PC </span><span class="c2">+ </span><span class="c9">o</span><span class="c3">U</span><span class="c18">PC </span><span class="c2">)</span><span class="c1">, where </span><span class="c9">o</span><span class="c3">U</span><span class="c18">PC </span><span class="c2">= &#8739;{(</span><span class="c9">u, v</span><span class="c2">)&#8739;</span><span class="c9">u </span><span class="c2">&isin; </span><span class="c9">U</span><span class="c6">PC</span><span class="c23">,v </span><span class="c11">&notin; </span><span class="c23">U</span><span class="c6">PC</span><span class="c11">}&#8739;</span><span class="c0">. Let </span><span class="c23">f</span><span class="c11">(</span><span class="c23">U</span><span class="c6">PC</span><span class="c11">) </span><span class="c0">be the community score of </span><span class="c23">PC</span><span class="c0">, </span><span class="c1">based on either internal density or conductance; a smaller value of </span><span class="c9">f</span><span class="c2">(</span><span class="c9">U</span><span class="c6">PC</span><span class="c11">) </span><span class="c0">indicates better social quality. </span></p><p class="c53"><span class="c1">As Figures 6(a) and 6(c) show, the internal density increases with the cluster size. As the size of a place cluster increases, the de- nominator of the internal density formula increases quadratically while the number of social links between users in the cluster (i.e., the numerator) does not increase at the same pace. On the other hand, Figures 6(b) and 6(d) show that conductance initially de- creases as the size of a cluster increases and fluctuates randomly for larger </span><span class="c9">U</span><span class="c6">PC </span><span class="c0">sizes, which is in line with the observations in [18]. </span><span class="c1">In Figure 6, we observe that the geo-social clusters discovered by DCPGS have better community scores (i.e., lower internal density and conductance scores) compared to all competitors, except Pure- SocialDistance. Since PureSocialDistance uses our social distance in clustering and disregards spatial proximity, its social quality is expected to be better than that of DCPGS; still, as shown in Fig- ure 3(c), its clusters are not distinguishable spatially. DCPGS out- performs DBSCAN and SimRank-based DCPGS. The quality gap between DCPGS and the 3 competitors in Figure 6(a) and 6(b) nar- rows as the size of clusters increases, since it is more difficult for a larger </span><span class="c9">U</span><span class="c3">PC </span><span class="c1">(usually obtained from a larger </span><span class="c9">PC</span><span class="c1">) to maintain a community-like structure compared to a smaller </span><span class="c9">U</span><span class="c6">PC </span><span class="c0">[18]. This </span><span class="c1">indicates that our social distance is effective in finding geo-social clusters with small or medium size. DCPGS is also generally better than the four competitors in Figures 6(c) and 6(d). CommuteTime has better community scores when the cluster size is around 50. Most community scores of Jaccard, CommuteTime, LinkCluster- ing, and Metis concentrate at the top-left corner of Figures 6(c) and 6(d), which indicates that these competitors have limited ability to discover geo-social clusters of various sizes. Furthermore, the quality gap between DCPGS and the five competitors in Figures 6(c) and 6(d) grows when the cluster size increases. We conclude that DCPGS (paired with our social distance measure) is the most effective method in finding geo-social clusters with both good so- cial quality and identifiable spatial contour. </span></p><p class="c10"><span class="c35">5. EFFICIENCY EVALUATION </span><span class="c1">In this section, we investigate the efficiency and scalability of DCPGS and its competitors. In Section 3, we presented two al- ternative implementations of DCPGS, an R-tree based (DCPGS- R) and a grid-based (DCPGS-G). We also implemented the corre- sponding R-tree based and grid-based versions of DBSCAN, and DCPGS based on Jaccard, SimRank, Katz, and CommuteTime. Linkclustering and Metis are also compared with DCPGS. In our comparison, we do not include PureSocialDistance, because this method is too slow (it takes roughly 1 day to finish) and it is not appropriate for spatial clustering. </span><span class="c2">Effect of data size. </span><span class="c1">In the first experiment, we test the scalabil- ity of all methods. For this purpose, we use subsets of the two GeoSN datasets, Gowalla and Brightkite, of various sizes. The sub- sets are determined by continuous spatial ranges, which contain the desired cardinality of places. All place subsets are associated with the original social network data. Five subsets with </span><span class="c2">200</span><span class="c1">K, </span><span class="c2">400</span><span class="c1">K, </span><span class="c2">600</span><span class="c1">K, </span><span class="c2">800</span><span class="c1">K, and </span><span class="c2">1000</span><span class="c1">K places are obtained from Gowalla. Sim- ilarly, five subsets of sizes </span><span class="c2">200</span><span class="c1">K, </span><span class="c2">300</span><span class="c1">K, </span><span class="c2">400</span><span class="c1">K, </span><span class="c2">500</span><span class="c1">K, and </span><span class="c2">600</span><span class="c1">K are extracted from Brightkite. When varying the data size, we keep </span><span class="c9">&epsilon; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">4</span><span class="c1">, </span><span class="c9">maxD </span><span class="c2">= 100</span><span class="c9">m</span><span class="c1">, </span><span class="c9">&tau; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">7 </span><span class="c1">and </span><span class="c9">&omega; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">5 </span><span class="c1">for all methods in </span></p><p class="c10"><span class="c46">107 </span></p><p class="c10"><span class="c5">0.95</span><span class="c85">1 </span></p><p class="c10"><span class="c119">Cluster size </span><span class="c196">PureSocialDistance </span></p><p class="c53"><span class="c147">DBSCAN SimRank DCPGS </span></p><p class="c10"><span class="c1">(a) Internal Density </span></p><p class="c10"><span class="c5">0.95</span><span class="c81">1 </span></p><p class="c10"><span class="c159">Cluster size </span></p><p class="c10"><span class="c5">0.9 </span></p><p class="c10"><span class="c5">0.85 </span></p><p class="c10"><span class="c5">0.9 </span></p><p class="c10"><span class="c5">0.8 </span></p><p class="c10"><span class="c5">0.75 </span></p><p class="c10"><span class="c5">0.85 </span></p><p class="c10"><span class="c5">0.7 </span></p><p class="c10"><span class="c5">0.65 </span></p><p class="c10"><span class="c5">0.8 </span></p><p class="c10"><span class="c147">PureSocialDistance </span><span class="c5">0.6 </span></p><p class="c10"><span class="c147">DBSCAN SimRank </span></p><p class="c10"><span class="c85">0.55 </span></p><p class="c10"><span class="c5">0 50 100 150 200 250 300 350 400 </span><span class="c147">DCPGS </span></p><p class="c10"><span class="c1">(b) Conductance </span></p><p class="c10"><span class="c81">0.55 </span><span class="c37">0 50 100 150 200 250 300 350 400 </span><span class="c81">0.75 </span><span class="c5">0 50 100 150 200 250 300 350 400 </span><span class="c81">1 </span></p><p class="c10"><span class="c37">0.95</span><span class="c81">Metis </span></p><p class="c10"><span class="c37">LinkClustering CommuteTime Jaccard DCPGS </span></p><p class="c10"><span class="c159">Cluster size</span><span class="c1">(c) Internal Density </span></p><p class="c10"><span class="c85">1 </span></p><p class="c10"><span class="c37">0.9 </span><span class="c5">0.95</span><span class="c37">0.85 </span></p><p class="c10"><span class="c37">0.8 </span></p><p class="c10"><span class="c5">0.9 </span></p><p class="c10"><span class="c37">0.75 </span></p><p class="c10"><span class="c5">0.85 </span><span class="c37">0.7 </span></p><p class="c10"><span class="c85">Metis </span><span class="c37">0.65 </span></p><p class="c10"><span class="c5">0.8 </span></p><p class="c75"><span class="c5">LinkClustering CommuteTime </span><span class="c37">0.6 </span></p><p class="c10"><span class="c5">Jaccard DCPGS </span></p><p class="c10"><span class="c119">Cluster size</span><span class="c1">(d) Conductance </span></p><p class="c10"><span class="c2">Figure 6: Community score evaluation in Gowalla </span></p><p class="c75"><span class="c1">Gowalla and </span><span class="c9">&epsilon; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">4</span><span class="c1">, </span><span class="c9">maxD </span><span class="c2">= 120</span><span class="c9">m</span><span class="c1">, </span><span class="c9">&tau; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">7 </span><span class="c1">and </span><span class="c9">&omega; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">5 </span><span class="c1">for all methods in Brightkite. (LinkClustering and Metis have no </span><span class="c9">&epsilon; </span><span class="c1">param- eter.) Figures 7(a) and 7(b) display the runtime of all tested meth- ods. DCPGS-G is much faster than DCPGS-R and maintains its performance gap as the database size grows. In all cases, DCPGS- G (DCPGS-R) is only a bit slower than DBSCAN-G (DBSCAN- R) and Jaccard-G (Jaccard-R)</span><span class="c17">8</span><span class="c1">, while DCPGS has much higher effectiveness as shown in Section 4. SimRank-G, (SimRank-R), Katz-G, and CommuteTime-G are much slower than DBSCAN- G (DBSCAN-R). This indicates that the time overhead imposed by DCPGS over the pure-spatial DBSCAN clustering algorithm is low, proving that our effective social distance is also efficient to compute. The costs of SimRank, Katz, and CommuteTime are all </span><span class="c9">D</span><span class="c1">nent </span><span class="c3">S </span><span class="c33">ct</span><span class="c1">dominated </span><span class="c30">(</span><span class="c48">p</span><span class="c33">i</span><span class="c48">,p</span><span class="c33">j</span><span class="c30">) </span><span class="c1">(i.e., replacing </span><span class="c19">computations; </span><span class="c1">by the the expensive R-tree </span><span class="c19">optimizing </span><span class="c1">search </span><span class="c9">D</span><span class="c3">S </span><span class="c33">sim</span><span class="c30">(</span><span class="c48">p</span><span class="c1">by </span><span class="c19">their </span><span class="c3">i</span><span class="c9">,p</span><span class="c1">a </span><span class="c6">j</span><span class="c11">)</span><span class="c0">, </span><span class="c19">spatial </span><span class="c23">D</span><span class="c6">S </span><span class="c3">Katz </span><span class="c19">search </span><span class="c2">(</span><span class="c9">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c19">compo- </span><span class="c6">j</span><span class="c11">)</span><span class="c0">, and </span></p><p class="c75"><span class="c1">grid-based search) has little effect on their overall performance.</span><span class="c17">9 </span><span class="c1">Metis has similar cost to DCPGS-G, while LinkClustering is slower; these methods are not effective for geo-social place clustering as discussed in Section 4. </span><span class="c2">Effect of </span><span class="c9">&epsilon;</span><span class="c2">. </span><span class="c1">Figures 7(c) and 7(d) show the performance of all methods when varying </span><span class="c9">&epsilon;</span><span class="c1">, except LinkClustering and Metis, which do not use parameter </span><span class="c9">&epsilon;</span><span class="c1">. We keep </span><span class="c9">&tau; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">7 </span><span class="c1">and </span><span class="c9">&omega; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">5 </span><span class="c1">for both datasets and </span><span class="c9">maxD </span><span class="c2">= 100</span><span class="c9">m </span><span class="c1">for Gowalla and </span><span class="c9">maxD </span><span class="c2">= 120</span><span class="c9">m </span><span class="c1">for Brightkite. Note that DCPGS-G is faster than DCPGS-R in all cases, which again indicates that grid partitioning greatly improves the efficiency of DCPGS. DCPGS-G (DCPGS-R) is slightly more expensive than Jaccard-G (Jaccard-R). The runtimes of SimRank- G, SimRank-R, Katz-G, and CommuteTime-G increase signifi- cantly when </span><span class="c9">&epsilon; </span><span class="c1">increases from </span><span class="c2">0</span><span class="c9">.</span><span class="c2">1 </span><span class="c1">to </span><span class="c2">0</span><span class="c9">.</span><span class="c2">5</span><span class="c1">, because the increase weakens the power of the spatial filter (Proposition 1) and more (expensive) </span><span class="c9">D</span><span class="c3">S </span><span class="c33">ct</span><span class="c30">(</span><span class="c48">p</span><span class="c33">i</span><span class="c48">,p</span><span class="c33">j</span><span class="c30">)</span><span class="c19">) </span><span class="c1">social </span><span class="c19">are computed. </span><span class="c1">distances (</span><span class="c9">D</span><span class="c19">DCPGS-G </span><span class="c3">S </span><span class="c33">sim</span><span class="c30">(</span><span class="c48">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c6">j</span><span class="c11">)</span><span class="c0">, </span><span class="c19">and </span><span class="c23">D</span><span class="c19">DCPGS-R </span><span class="c6">S </span><span class="c3">Katz </span><span class="c2">(</span><span class="c9">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c6">j</span><span class="c11">)</span><span class="c0">, </span><span class="c19">remain </span><span class="c0">and </span></p><p class="c10"><span class="c44">8</span><span class="c0">To make the plots clearer, we omit the runtime of Jaccard-G (Jaccard-R) from some of them; the time of Jaccard-G (Jaccard- R) always falls between the time of DCPGS-G (DCPGS-R) and DBSCAN-G (DBSCAN-R). </span><span class="c44">9</span><span class="c0">This is the reason why we omit the runtimes of Katz-R and CommuteTime-R from the comparison. </span></p><p class="c10"><span class="c85">0.75 </span></p><p class="c10"><span class="c5">0 50 100 150 200 250 300 350 400 </span></p><p class="c10"><span class="c31">&#9655; </span><span class="c7">DCPGS-G </span><span class="c31">+ </span><span class="c7">DBSCAN-G </span><span class="c22">* </span><span class="c31">&#9723; </span><span class="c7">DCPGS-R </span><span class="c31">&#9665; </span><span class="c7">DBSCAN-R </span><span class="c31">&#9734; </span><span class="c7">Katz-G </span></p><p class="c10"><span class="c7">CommuteTime-G </span><span class="c31">&#9661; </span><span class="c7">SimRank-G </span><span class="c31">&times; </span><span class="c7">SimRank-R </span><span class="c31">&#8718; </span><span class="c7">Jaccard-G LinkClustering </span><span class="c31">&#9679; </span><span class="c7">Metis </span><span class="c31">&#9650; </span><span class="c7">Jaccard-R </span></p><p class="c50"><span class="c96">) s dnoces( e mitnu</span><span class="c38">R</span><span class="c42">101010101010</span><span class="c65">5 4 </span></p><p class="c10"><span class="c65">3 </span></p><p class="c10"><span class="c65">2 </span></p><p class="c10"><span class="c65">1 </span></p><p class="c10"><span class="c65">0 </span></p><p class="c50"><span class="c47">10</span><span class="c65">&minus;1 </span><span class="c42">2.0 4.0 6.0 8.0 10.0 12.0 14.0 </span><span class="c181">) s dnoces( e mitnu</span><span class="c28">R</span><span class="c55">101010</span><span class="c106">2 1 </span></p><p class="c10"><span class="c106">0 </span></p><p class="c10"><span class="c38">Data </span><span class="c1">(a) </span><span class="c38">size: </span><span class="c1">Gowalla </span></p><p class="c10"><span class="c38"># of places ( &times; 10</span><span class="c207">5</span><span class="c38">) </span></p><p class="c10"><span class="c28">Data </span><span class="c1">(b) </span><span class="c28">size: </span><span class="c1">Brightkite </span></p><p class="c10"><span class="c28"># of places ( &times; 10</span><span class="c103">5</span><span class="c28">) </span></p><p class="c10"><span class="c47">10</span><span class="c15">0.1 </span><span class="c66">0 </span></p><p class="c10"><span class="c15">0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 </span><span class="c20">10</span><span class="c106">&minus;1 </span><span class="c55">2.0 3.0 4.0 5.0 6.0 7.0 8.0 </span><span class="c15">10</span><span class="c66">5 </span></p><p class="c10"><span class="c0">(c) Gowalla </span></p><p class="c10"><span class="c192">&isin; </span><span class="c61">10</span><span class="c85">2 </span><span class="c15">10</span><span class="c66">4 </span></p><p class="c10"><span class="c15">10</span><span class="c66">3 </span></p><p class="c10"><span class="c15">10</span><span class="c66">2 </span></p><p class="c10"><span class="c61">10</span><span class="c85">1 </span></p><p class="c10"><span class="c15">10</span><span class="c66">1 </span></p><p class="c10"><span class="c0">(d) Brightkite </span><span class="c138">&isin; </span><span class="c79">10</span><span class="c25">10 </span><span class="c108">0 </span><span class="c25">50 100 150 200 250 300 </span><span class="c131">10</span><span class="c61">0.1 </span><span class="c85">0 </span><span class="c61">0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 </span><span class="c14">) s dnoces( e mitnu</span><span class="c15">R</span><span class="c25">1010</span><span class="c108">5 4 </span></p><p class="c10"><span class="c64">10</span><span class="c78">3 </span></p><p class="c10"><span class="c63">) s dnoces( e mitnu</span><span class="c61">R</span><span class="c99">eps </span><span class="c15">(DBSCAN) </span><span class="c1">(e) Gowalla </span></p><p class="c10"><span class="c15">or </span><span class="c99">maxD </span><span class="c15">(others) </span><span class="c186">m </span></p><p class="c10"><span class="c62">eps </span><span class="c61">(DBSCAN) </span><span class="c1">(f) Brightkite </span></p><p class="c10"><span class="c61">or </span><span class="c62">maxD </span><span class="c61">(others) </span><span class="c166">m </span></p><p class="c10"><span class="c205">10</span><span class="c72">1 </span><span class="c29">0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 </span><span class="c64">10</span><span class="c78">2 </span><span class="c25">10</span><span class="c108">3 </span></p><p class="c10"><span class="c25">10</span><span class="c108">2 </span></p><p class="c10"><span class="c64">10</span><span class="c78">1 </span></p><p class="c10"><span class="c25">10</span><span class="c108">1 </span></p><p class="c10"><span class="c79">10</span><span class="c64">10 </span><span class="c78">0 </span><span class="c64">50 100 150 200 250 300 </span><span class="c59">10</span><span class="c72">2 </span></p><p class="c10"><span class="c0">(h) Brightkite </span><span class="c132">&omega; </span><span class="c2">Figure 7: Runtime experiments </span></p><p class="c50"><span class="c1">quite stable for all </span><span class="c9">&epsilon; </span><span class="c1">values since the computational cost of our so- cial distance is insignificant. </span><span class="c2">Effect of </span><span class="c9">maxD </span><span class="c2">(</span><span class="c9">eps </span><span class="c2">in DBSCAN). </span><span class="c1">Parameter </span><span class="c9">maxD </span><span class="c1">(</span><span class="c9">eps </span><span class="c1">in DB- SCAN) decides the spatial ranges of the geo-social (spatial) neigh- borhoods of places and the size of the constructed place network for LinkClustering and Metis. Thus, </span><span class="c9">maxD </span><span class="c1">(</span><span class="c9">eps</span><span class="c1">) greatly influences the efficiency of all methods. Figures 7(e) and 7(f) display the run- time of all methods when varying </span><span class="c9">maxD </span><span class="c1">(</span><span class="c9">eps</span><span class="c1">). We set </span><span class="c9">&tau; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">7</span><span class="c1">, </span><span class="c9">&epsilon; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">4</span><span class="c1">, and </span><span class="c9">&omega; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">5 </span><span class="c1">for all the methods except DBSCAN on both Gowalla and Brightkite datasets. Note that SimRank-G, SimRank- R, Katz-G and CommuteTime-G are more sensitive to </span><span class="c9">maxD </span><span class="c1">com- pared </span><span class="c9">D</span><span class="c3">S </span><span class="c33">Katz </span><span class="c1">to </span><span class="c30">(</span><span class="c48">p</span><span class="c3">i</span><span class="c9">,p</span><span class="c1">the </span><span class="c6">j</span><span class="c11">)</span><span class="c0">, </span><span class="c1">other </span><span class="c0">and </span><span class="c1">methods, </span><span class="c23">D</span><span class="c6">S </span><span class="c3">ct</span><span class="c2">(</span><span class="c9">p</span><span class="c6">i</span><span class="c23">,p</span><span class="c1">due </span><span class="c6">j</span><span class="c11">) </span><span class="c0">distance </span><span class="c1">to the high </span><span class="c0">computations. </span><span class="c1">cost of </span><span class="c9">D</span><span class="c3">S </span><span class="c33">sim</span><span class="c0">The </span><span class="c30">(</span><span class="c48">p</span><span class="c33">i</span><span class="c48">,p</span><span class="c33">j</span><span class="c30">)</span><span class="c19">, </span><span class="c0">cost </span></p><p class="c10"><span class="c46">108 </span></p><p class="c10"><span class="c29">10</span><span class="c72">5 </span></p><p class="c10"><span class="c29">10</span><span class="c72">4 </span></p><p class="c10"><span class="c29">10</span><span class="c72">3 </span></p><p class="c10"><span class="c59">10</span><span class="c72">1 </span></p><p class="c10"><span class="c29">10</span><span class="c72">2 </span></p><p class="c10"><span class="c0">(g) Gowalla </span></p><p class="c10"><span class="c132">&omega; </span><span class="c86">10</span><span class="c72">0 </span></p><p class="c10"><span class="c59">0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 </span></p><p class="c10 c115"><span class="c1">of DCPGS-G stays below </span><span class="c2">100 </span><span class="c1">seconds as </span><span class="c9">maxD </span><span class="c1">ranges from </span><span class="c2">10</span><span class="c9">m </span><span class="c1">to </span><span class="c2">300</span><span class="c9">m </span><span class="c1">and remains close to that of DBSCAN-G and Jaccard-G. DCPGS-R is also close to DBSCAN-R and Jaccard-R. DCPGS- G remains faster than DCPGS-R, but their performance gap nar- rows with </span><span class="c9">maxD</span><span class="c1">; the reason is that grid-based computations be- come more expensive as the grid cell size (i.e., </span><span class="c9">maxD</span><span class="c1">) increases. DCPGS-R eventually becomes faster than DCPGS-G for a very large </span><span class="c9">maxD</span><span class="c1">, e.g. </span><span class="c9">maxD </span><span class="c2">&gt; 1000</span><span class="c9">m</span><span class="c1">; however, as shown in Fig- ure 3(c), geo-social clusters with a very large </span><span class="c9">maxD </span><span class="c1">are not spa- tially identifiable. At an appropriate </span><span class="c9">maxD </span><span class="c1">value (around 100</span><span class="c9">m</span><span class="c1">), DCPGS-G is clearly the best choice. Metis has similar cost to DCPGS-G while LinkClustering is slower. </span><span class="c2">Effect of </span><span class="c9">&omega;</span><span class="c2">. </span><span class="c1">Figures 7(g) and 7(h) display the runtimes of the clus- tering methods when varying </span><span class="c9">&omega;</span><span class="c1">. We keep </span><span class="c9">&tau; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">7 </span><span class="c1">and </span><span class="c9">&epsilon; </span><span class="c2">= 0</span><span class="c9">.</span><span class="c2">4 </span><span class="c1">for all methods on both datasets, while setting </span><span class="c9">maxD </span><span class="c2">= 100</span><span class="c9">m </span><span class="c1">in Gowalla and </span><span class="c9">maxD </span><span class="c2">= 120</span><span class="c9">m </span><span class="c1">in Brightkite. The costs of all methods are not much sensitive to </span><span class="c9">&omega;</span><span class="c1">; an exception is the runtimes of SimRank-G, SimRank-R, Katz-G, and CommuteTime-G which decrease when </span><span class="c9">&omega; </span><span class="c2">&gt; 0</span><span class="c9">.</span><span class="c2">5</span><span class="c1">. The reason is again the high effect of the spatial filter (Proposition 1), when </span><span class="c9">&omega; </span><span class="c1">is large, due to which many expensive so- cial distance computations are avoided. As a final note, the social distance constraint </span><span class="c9">&tau; </span><span class="c1">is only applied as an ultimate filter and has no influence on the runtimes of all methods. It only slightly influences the costs of LinkClustering and Metis because it affects the size of the place network, on which these methods operate. </span></p><p class="c115 c197"><span class="c35">6. RELATED WORK </span><span class="c1">Our clustering problem is related to various research topics, in- cluding traditional spatial clustering, using mobility data to analyze places, clustering using spatial and non-spatial attributes, studying the relationship between spatial and social attributes, community detection, and other work on GeoSNs. </span><span class="c2">Spatial Clustering. </span><span class="c1">Spatial clustering algorithms, surveyed in [12], are divided into three categories: </span><span class="c16">partitioning, hierarchi- cal </span><span class="c1">and </span><span class="c16">density-based </span><span class="c1">clustering. Partitioning methods, includ- ing </span><span class="c9">k</span><span class="c1">-means, </span><span class="c9">k</span><span class="c1">-medoids, and CLARANS [23], are good at find- ing spherical-shaped clusters in small and medium-sized datasets. They need a pre-defined parameter </span><span class="c9">k </span><span class="c1">to specify the number of clusters obtained. However, partitioning methods are not able to detect clusters of arbitrary shapes. Hierarchical clustering tech- niques, such as BIRCH [41], Chameleon [15] and CURE [11], as- sign objects to clusters in two fashions: </span><span class="c16">agglomerative </span><span class="c1">(bottom-up) and </span><span class="c16">divisive </span><span class="c1">(top-down). Hierarchical clustering methods do not have well-defined termination criteria and cannot correct the re- sult if some objects are assigned to the wrong clusters at an early stage. Density-based clustering methods, like DBSCAN [9], dis- cover clusters of arbitrary shapes and sizes. Objects in dense re- gions are grouped as clusters, while objects in sparse regions are la- beled as outliers. OPTICS [3] is an extension of DBSCAN, which generates an augmented ordering of the dataset that captures its density-based clustering structure at different granularities. DEN- CLUE [13] models the overall point density analytically as the sum of influence functions of the data points. Clusters can then be identified by determining density-attractors and clusters of ar- bitrary shapes can be easily described by a simple equation based on the overall density function. GDBSCAN [25] is a generaliza- tion of DBSCAN that clusters point objects as well as spatially ex- tended objects according to both their spatial and their non-spatial attributes. Our work adopts the density-based clustering framework to find place clusters in a geo-social network, by considering both the spatial distance and the social coherence of the places. </span></p><p class="c10 c117"><span class="c2">Analysis of Places based on Mobility Data. </span><span class="c1">Brilhante et al. [6] detect &ldquo;communities&rdquo; of places of interest (POIs) on a map based on how strongly the places are correlated in sequences of visits by mobile users. Different from our work, the social relationships between the users who visit the places and the spatial distances be- tween places are disregarded. The co-existence of places in the vis- iting histories of users is the only criterion used for clustering. The proposed solution generates a graph </span><span class="c9">G </span><span class="c1">that connects pairs POIs ac- cording to the nature of their co-existence in sequences of user vis- its and then employs a classic algorithm for community detection on </span><span class="c9">G </span><span class="c1">to identify the place communities. Andrienko et al. [2] present an analysis and visualization tool, which first identifies interesting events of moving objects (e.g., instances of slow car movements), then spatially clusters these events, using density-based clustering to derive a set of significant places (e.g., regions where traffic jams occur), and finally applies visual analytics to aggregate and ana- lyze the events with respect to parameters such as location, time and direction of movement. </span><span class="c2">Clustering based on Spatial and Non-Spatial Attributes. </span><span class="c1">Clus- tering objects based on spatial and non-spatial attributes finds ap- plications in different areas, such as computer vision, GIS, and so- cial networks. Yu et al. [39] cluster pixels considering both the RGB color vectors and spatial proximity that is useful in natural image segmentation. Gennip et al. [32] use spectral clustering to identify communities in a graph where nodes are gang members and weighted edges indicate the gang members&rsquo; social interactions and geographic locations. Zhang et al. [40] apply clustering by ad- justing the spatial distance between two objects according to the non-spatial attribute values between them. </span><span class="c2">Spatial-Social Relationship. </span><span class="c1">The relationship between geography and social structure has been long studied by sociologists. Re- searchers have found that the likelihood of friendship with a per- son is decreasing with distance, which has been observed within colleges [29], new housing developments [10], and projects for the elderly [21]. Scellato et al. [27] performed a quantitative study on the socio-spatial properties of users in GeoSNs. By utilizing social and spatial properties of GeoSNs, the same research group proposed a link prediction model [28]. Ye et al. [37] designed a location recommendation system in the context of GeoSNs. Back- strom et al. [5] predict the location of an individual from a sparse set of known user locations using the relationship between geography and friendship. Wang et al. [34] find that the similarity between the movements of two individuals strongly correlates with their prox- imity in the social network. This correlation is used as a tool for link prediction in a social network. Pham et al. [24] propose an entropy-based model (EBM) that not only infers social connections but also estimates the strength of social connections by analyzing people&rsquo;s co-occurrences in space and time. Different from exist- ing work, we neither study the spatial-social relationship nor do prediction or recommendation utilizing this relationship. We per- form density-based clustering of GeoSN places considering both the spatial distances between them and the social relationships be- tween users that visit the places. </span><span class="c2">Detecting and Evaluating Communities in Networks. </span><span class="c1">There are many existing works on network community detection and cluster- ing of nodes in a graph using only the network distance between nodes [8, 22, 31, 35, 38]. SCAN [35] is an algorithm that detects clusters, hubs, and outliers in networks. [38] proposed partition- ing, hierarchical and density-based algorithms to cluster objects on spatial networks, based on shortest-path distance. [18] summarized and empirically evaluated algorithms for network community de- tection. In Section 4.2.2, we have used network community quality </span></p><p class="c84"><span class="c46">109 </span></p><p class="c10 c115"><span class="c1">measures [18] to evaluate the social quality of the place clusters found by our algorithms. </span><span class="c2">Orthogonal Works in GeoSNs. </span><span class="c1">Cho et al. [7] studied the problem of using social relationships to explain human movement. Yang et al. [36] introduced a </span><span class="c16">Socio-Spatial Group Query </span><span class="c1">(SSGQ) that re- trieves a group of users who have certain social connection strength and the sum of their spatial distances is minimized. Most recently, a general framework for Geo-Social query processing that supports </span><span class="c16">Range Friends </span><span class="c1">(RF), </span><span class="c16">Nearest Friends </span><span class="c1">(NF), and </span><span class="c16">Nearest Star Group </span><span class="c1">(NSG) queries was proposed in [4]. </span></p><p class="c109"><span class="c35">7. CONCLUSION </span><span class="c1">In this paper, we studied for the first time the problem of Density- based Clustering Places in Geo-Social Networks (DCPGS). Our clustering model extends the density-based clustering paradigm to consider both the spatial and social distances between places. We defined a new measure for the social distance between places, con- sidering the social ties between users that visit them. Our measure is shown to be more effective and efficient to compute, compared more complex ones based on node-to-node graph proximity. We analyzed the effectiveness of DCPGS via case studies and demon- strated that DCPGS can discover clusters with interesting proper- ties (i.e., barrier-based splitting, spatially loose clusters, clusters with fuzzy boundaries), which cannot be found by merely using spatial clustering. Besides, we designed two evaluation measures to quantitatively evaluate the social quality of clusters detected by DCPGS or competitors, called social entropy and community score, which also confirm that DCPGS is more effective than alter- native approaches. Finally, we optimized the efficiency of DCPGS clustering with the help of a grid-based data structure. Our opti- mized DCPGS algorithm can cluster millions of places within just a few seconds. In the future, we plan to consider the influence of the time-span of user visits to places and the multiplicity of user visits to a place to cluster places. </span></p><p class="c137"><span class="c35">8. REFERENCES </span></p><p class="c180"><span class="c7">[1] Y.-Y. Ahn, J. P. Bagrow, and S. Lehmann. Link communities reveal multiscale complexity in networks. </span><span class="c26">Nature</span><span class="c7">, 466:761&ndash;764, 2010. [2] G. L. Andrienko, N. V. Andrienko, C. Hurter, S. Rinzivillo, and </span></p><p class="c191"><span class="c7">S. Wrobel. Scalable analysis of movement data for extracting and exploring significant places. </span><span class="c26">IEEE TVCG</span><span class="c7">, 19(7):1078&ndash;1094, 2013. [3] M. Ankerst, M. M. Breunig, H.-P. Kriegel, and J. Sander. Optics: </span></p><p class="c143"><span class="c7">Ordering points to identify the clustering structure. In </span><span class="c26">SIGMOD</span><span class="c7">, 1999. [4] N. Armenatzoglou, S. Papadopoulos, and D. Papadias. A general </span></p><p class="c163"><span class="c7">framework for geo-social query processing. </span><span class="c26">PVLDB</span><span class="c7">, 6(10):913&ndash;924, 2013. [5] L. Backstrom, E. Sun, and C. Marlow. Find me if you can: </span></p><p class="c155"><span class="c7">Improving geographical prediction with social and spatial proximity. In </span><span class="c26">WWW</span><span class="c7">, 2010. [6] I. R. Brilhante, M. Berlingerio, R. Trasarti, C. Renso, J. A. F. </span></p><p class="c202"><span class="c7">de Mac&ecirc;do, and M. A. Casanova. Cometogether: Discovering communities of places in mobility data. In </span><span class="c26">MDM</span><span class="c7">, 2012. [7] E. Cho, S. A. Myers, and J. Leskovec. Friendship and mobility: user </span></p><p class="c122"><span class="c7">movement in location-based social networks. In </span><span class="c26">KDD</span><span class="c7">, 2011. [8] A. Clauset, M. E. Newman, and C. Moore. Finding community </span></p><p class="c135"><span class="c7">structure in very large networks. </span><span class="c26">Physical review E</span><span class="c7">, 70(6):066111, 2004. [9] M. Ester, H.-P. Kriegel, J. Sander, and X. Xu. A density-based </span></p><p class="c82"><span class="c7">algorithm for discovering clusters in large spatial databases with noise. In </span><span class="c26">KDD</span><span class="c7">, 1996. [10] L. Festinger, S. Schachter, and K. Back. Social pressures in informal groups: a study of human factors in housing. </span><span class="c26">Stanford Univ. Pr.</span><span class="c7">, 1963. [11] S. Guha, R. Rastogi, and K. Shim. Cure: An efficient clustering </span></p><p class="c195 c201"><span class="c7">algorithm for large databases. In </span><span class="c26">SIGMOD</span><span class="c7">, 1998. </span></p><p class="c10 c128"><span class="c7">[12] J. Han and M. Kamber. </span><span class="c26">Data Mining: Concepts and Techniques</span><span class="c7">. </span></p><p class="c129"><span class="c7">Morgan Kaufmann, 2000. [13] A. Hinneburg and D. A. Keim. An efficient approach to clustering in </span></p><p class="c130"><span class="c7">large multimedia databases with noise. In </span><span class="c26">KDD</span><span class="c7">, 1998. [14] G. Jeh and J. Widom. Simrank: A measure of structural-context </span></p><p class="c182"><span class="c7">similarity. Technical Report 2001-41, Stanford InfoLab, 2001. [15] G. Karypis, E.-H. Han, and V. Kumar. Chameleon: Hierarchical </span></p><p class="c124"><span class="c7">clustering using dynamic modeling. </span><span class="c26">IEEE Computer</span><span class="c7">, 32(8):68&ndash;75, 1999. [16] G. Karypis and V. Kumar. A fast and high quality multilevel scheme </span></p><p class="c161"><span class="c7">for partitioning irregular graphs. </span><span class="c26">SIAM Journal on scientific Computing</span><span class="c7">, 20(1):359&ndash;392, 1998. [17] J. Leskovec, J. M. Kleinberg, and C. Faloutsos. Graph evolution: Densification and shrinking diameters. </span><span class="c26">TKDD</span><span class="c7">, 1(1), 2007. [18] J. Leskovec, K. J. Lang, and M. W. Mahoney. Empirical comparison </span></p><p class="c127"><span class="c7">of algorithms for network community detection. In </span><span class="c26">WWW</span><span class="c7">, 2010. [19] K. V. Mardia, J. Kent, and J. Bibby. </span><span class="c26">Multivariate analysis </span></p><p class="c162"><span class="c26">(probability and mathematical statistics)</span><span class="c7">. Academic Press London, 1980. [20] S. Milgram. The small world problem. </span><span class="c26">Psychology today</span><span class="c7">, </span></p><p class="c97"><span class="c7">2(1):60&ndash;67, 1967. [21] L. Nahemow and M. Lawton. Similarity and propinquity in </span></p><p class="c174 c195"><span class="c7">friendship formation. </span><span class="c26">Journal of Personality and Social Psychology</span><span class="c7">, 32(2):205&ndash;213, 1975. [22] A. Y. Ng, M. I. Jordan, and Y. Weiss. On spectral clustering: </span></p><p class="c27"><span class="c7">Analysis and an algorithm. In </span><span class="c26">NIPS</span><span class="c7">, 2001. [23] R. T. Ng and J. Han. Efficient and effective clustering methods for </span></p><p class="c126"><span class="c7">spatial data mining. In </span><span class="c26">VLDB</span><span class="c7">, 1994. [24] H. Pham, C. Shahabi, and Y. Liu. Ebm: an entropy-based model to </span></p><p class="c149"><span class="c7">infer social strength from spatiotemporal data. In </span><span class="c26">SIGMOD</span><span class="c7">, 2013. [25] J. Sander, M. Ester, H.-P. Kriegel, and X. Xu. Density-based </span></p><p class="c52"><span class="c7">clustering in spatial databases: The algorithm gdbscan and its applications. </span><span class="c26">Data Min. Knowl. Discov.</span><span class="c7">, 2(2):169&ndash;194, 1998. [26] P. Sarkar and A. W. Moore. A tractable approach to finding closest </span></p><p class="c125"><span class="c7">truncated-commute-time neighbors in large graphs. In </span><span class="c26">UAI</span><span class="c7">, 2007. [27] S. Scellato, A. Noulas, R. Lambiotte, and C. Mascolo. Socio-spatial </span></p><p class="c123"><span class="c7">properties of online location-based social networks. In </span><span class="c26">ICWSM</span><span class="c7">, 2011. [28] S. Scellato, A. Noulas, and C. Mascolo. Exploiting place features in </span></p><p class="c102"><span class="c7">link prediction on location-based social networks. In </span><span class="c26">KDD</span><span class="c7">, 2011. [29] J. Q. Stewart. An inverse distance variation for certain social </span></p><p class="c176"><span class="c7">influence. </span><span class="c26">Science</span><span class="c7">, 93(2404):89&ndash;90, 1941. [30] P.-N. Tan, M. Steinbach, and V. Kumar. </span><span class="c26">Introduction to Data Mining</span><span class="c7">. </span></p><p class="c206"><span class="c7">Addison-Wesley, 2005. [31] C. Tantipathananandh, T. Y. Berger-Wolf, and D. Kempe. A </span></p><p class="c136"><span class="c7">framework for community identification in dynamic social networks. In </span><span class="c26">KDD</span><span class="c7">, 2007. [32] Y. van Gennip, B. Hunter, R. Ahn, P. Elliott, K. Luh, M. Halvorson, S. Reid, M. Valasik, J. Wo, G. E. Tita, A. L. Bertozzi, and P. J. Brantingham. Community detection using spectral clustering on sparse geosocial data. </span><span class="c26">CoRR</span><span class="c7">, abs/1206.4969, 2012. [33] C. Wang, V. Satuluri, and S. Parthasarathy. Local probabilistic </span></p><p class="c27"><span class="c7">models for link prediction. In </span><span class="c26">ICDM</span><span class="c7">, 2007. [34] D. Wang, D. Pedreschi, C. Song, F. Giannotti, and A.-L. Barabasi. </span></p><p class="c167 c174"><span class="c7">Human mobility, social ties, and link prediction. In </span><span class="c26">KDD</span><span class="c7">, 2011. [35] X. Xu, N. Yuruk, Z. Feng, and T. A. J. Schweiger. Scan: a structural </span></p><p class="c123"><span class="c7">clustering algorithm for networks. In </span><span class="c26">KDD</span><span class="c7">, 2007. [36] D.-N. Yang, C.-Y. Shen, W.-C. Lee, and M.-S. Chen. On socio-spatial group query for location-based social networks. In </span><span class="c26">KDD</span><span class="c7">, 2012. [37] M. Ye, P. Yin, and W.-C. Lee. Location recommendation for </span></p><p class="c57"><span class="c7">location-based social networks. In </span><span class="c26">GIS</span><span class="c7">, 2010. [38] M. L. Yiu and N. Mamoulis. Clustering objects on a spatial network. </span></p><p class="c199"><span class="c7">In </span><span class="c26">SIGMOD</span><span class="c7">, 2004. [39] Z. Yu, O. C. Au, R. Zou, W. Yu, and J. Tian. An adaptive </span></p><p class="c117 c167"><span class="c7">unsupervised approach toward pixel clustering and color image segmentation. </span><span class="c26">Pattern Recognition</span><span class="c7">, 43(5):1889&ndash;1906, 2010. [40] B. Zhang, W. J. Yin, M. Xie, and J. Dong. Geo-spatial clustering with </span></p><p class="c183"><span class="c7">non-spatial attributes and geographic non-overlapping constraint: A penalized spatial distance measure. In </span><span class="c26">PAKDD</span><span class="c7">, 2007. [41] T. Zhang, R. Ramakrishnan, and M. Livny. Birch: An efficient data </span></p><p class="c188"><span class="c7">clustering method for very large databases. In </span><span class="c26">SIGMOD</span><span class="c7">, 1996. </span></p><p class="c114"><span class="c46">110 </span></p></body></html>